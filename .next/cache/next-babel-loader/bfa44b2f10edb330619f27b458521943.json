{"ast":null,"code":"import connectDb from \"../middlewares/dbMiddleware.js\";\nimport verify from \"../verification/verifyToken.js\";\n\nconst mongoose = require(\"mongoose\");\n\nlet User;\n\ntry {\n  User = mongoose.model(\"Users\");\n} catch {\n  User = require(\"../models/Users\");\n}\n\nlet Article;\n\ntry {\n  Article = mongoose.model(\"Articles\");\n} catch {\n  Article = require(\"../models/Articles\");\n}\n\nconst handler = async (req, res) => {\n  await User.findById(req.user._id, async (err, user) => {\n    if (err) {\n      res.send(err);\n    } else {\n      const article = new Article({\n        title: \"To be edited\",\n        author: `${user.firstName} ${user.lastName}`,\n        authorId: user._id,\n        date: new Date(),\n        image: \"data:image/png;base64,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\",\n        content: {},\n        isApproved: user.isModerator\n      });\n      await article.save((err, data) => {\n        if (err) {\n          res.send(err);\n        } else {\n          res.json(data);\n        }\n      });\n    }\n  });\n};\n\nexport default verify(connectDb(handler));","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/api/create/articles.js"],"names":["connectDb","verify","mongoose","require","User","model","Article","handler","req","res","findById","user","_id","err","send","article","title","author","firstName","lastName","authorId","date","Date","image","content","isApproved","isModerator","save","data","json"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,gCAAtB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,IAAIC,IAAJ;;AACA,IAAI;AACFA,EAAAA,IAAI,GAAGF,QAAQ,CAACG,KAAT,CAAe,OAAf,CAAP;AACD,CAFD,CAEE,MAAM;AACND,EAAAA,IAAI,GAAGD,OAAO,CAAC,iBAAD,CAAd;AACD;;AAED,IAAIG,OAAJ;;AACA,IAAI;AACFA,EAAAA,OAAO,GAAGJ,QAAQ,CAACG,KAAT,CAAe,UAAf,CAAV;AACD,CAFD,CAEE,MAAM;AACNC,EAAAA,OAAO,GAAGH,OAAO,CAAC,oBAAD,CAAjB;AACD;;AAED,MAAMI,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAML,IAAI,CAACM,QAAL,CAAcF,GAAG,CAACG,IAAJ,CAASC,GAAvB,EAA4B,OAAOC,GAAP,EAAYF,IAAZ,KAAqB;AACrD,QAAIE,GAAJ,EAAS;AACPJ,MAAAA,GAAG,CAACK,IAAJ,CAASD,GAAT;AACD,KAFD,MAEO;AACL,YAAME,OAAO,GAAG,IAAIT,OAAJ,CAAY;AAC1BU,QAAAA,KAAK,EAAE,cADmB;AAE1BC,QAAAA,MAAM,EAAG,GAAEN,IAAI,CAACO,SAAU,IAAGP,IAAI,CAACQ,QAAS,EAFjB;AAG1BC,QAAAA,QAAQ,EAAET,IAAI,CAACC,GAHW;AAI1BS,QAAAA,IAAI,EAAE,IAAIC,IAAJ,EAJoB;AAK1BC,QAAAA,KAAK,EACH,gjEANwB;AAO1BC,QAAAA,OAAO,EAAE,EAPiB;AAQ1BC,QAAAA,UAAU,EAAEd,IAAI,CAACe;AARS,OAAZ,CAAhB;AAWA,YAAMX,OAAO,CAACY,IAAR,CAAa,CAACd,GAAD,EAAMe,IAAN,KAAe;AAChC,YAAIf,GAAJ,EAAS;AACPJ,UAAAA,GAAG,CAACK,IAAJ,CAASD,GAAT;AACD,SAFD,MAEO;AACLJ,UAAAA,GAAG,CAACoB,IAAJ,CAASD,IAAT;AACD;AACF,OANK,CAAN;AAOD;AACF,GAvBK,CAAN;AAwBD,CAzBD;;AA0BA,eAAe3B,MAAM,CAACD,SAAS,CAACO,OAAD,CAAV,CAArB","sourcesContent":["import connectDb from \"../middlewares/dbMiddleware.js\";\nimport verify from \"../verification/verifyToken.js\";\nconst mongoose = require(\"mongoose\");\n\nlet User;\ntry {\n  User = mongoose.model(\"Users\");\n} catch {\n  User = require(\"../models/Users\");\n}\n\nlet Article;\ntry {\n  Article = mongoose.model(\"Articles\");\n} catch {\n  Article = require(\"../models/Articles\");\n}\n\nconst handler = async (req, res) => {\n  await User.findById(req.user._id, async (err, user) => {\n    if (err) {\n      res.send(err);\n    } else {\n      const article = new Article({\n        title: \"To be edited\",\n        author: `${user.firstName} ${user.lastName}`,\n        authorId: user._id,\n        date: new Date(),\n        image:\n          \"data:image/png;base64,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\",\n        content: {},\n        isApproved: user.isModerator,\n      });\n\n      await article.save((err, data) => {\n        if (err) {\n          res.send(err);\n        } else {\n          res.json(data);\n        }\n      });\n    }\n  });\n};\nexport default verify(connectDb(handler));\n"]},"metadata":{},"sourceType":"module"}