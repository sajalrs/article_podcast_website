{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Page from \"../components/Page/Page\";\nimport styles from \"../components/Page/Page.module.css\"; // import { Link } from \"react-router-dom\";\n// import { useHistory, useParams } from \"react-router-dom\";\n\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport { LoginContext } from \"../contexts/reducers/loginContext\";\nimport { setIsLoggedInAction, setUserAction } from \"../contexts/actions\"; // import { fetchBlogArticles } from \"./_app.js\";\n\nimport axios from \"axios\";\n\nvar Login = function Login(props) {\n  _s();\n\n  var history = useRouter();\n  var email = history.query.email;\n\n  var _useContext = useContext(LoginContext),\n      loginState = _useContext[0],\n      loginDispatch = _useContext[1];\n\n  var isLoggedInGlobal = loginState.isLoggedIn;\n  var userGlobal = loginState.user;\n\n  var setIsLoggedIn = function setIsLoggedIn(setTo) {\n    return loginDispatch(setIsLoggedInAction(setTo));\n  };\n\n  var setUser = function setUser(setTo) {\n    return loginDispatch(setUserAction(setTo));\n  }; // const socket = useSelector((state) => state.network.socket);\n\n\n  useEffect(function () {\n    if (isLoggedInGlobal && formData.password === \"\") {\n      if (email) {\n        subscribeNewsletter().then(function () {\n          if (userGlobal && !userGlobal.isSubscribed) {\n            setUser(_objectSpread(_objectSpread({}, userGlobal), {}, {\n              isSubscribed: true\n            }));\n          }\n        });\n      } else {\n        alert(\"You are already logged in\");\n      }\n\n      history.push(\"/\");\n    }\n  }, [isLoggedInGlobal]);\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      formData = _useState[0],\n      setFormData = _useState[1];\n\n  var subscribeNewsletter = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var toPost, options;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              toPost = {\n                isSubscribed: true\n              };\n              options = {\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              };\n              _context.next = 4;\n              return axios.post(\"/api/auth/subscribe\", JSON.stringify(toPost), options).then(function (res) {\n                alert(\"Subscribed to newsletter\");\n              })[\"catch\"](function (err) {\n                if (err.response && err.response.status) {\n                  if (err.response.status === 401 || err.response.status === 400) {\n                    alert(err.response.data.error);\n                  } else if (err.response.status !== 200) {\n                    throw Error(err);\n                  }\n                } else {\n                  console.log(err);\n                }\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function subscribeNewsletter() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (email) {\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        email: email\n      }));\n    }\n  }, [email]);\n\n  var onEmailChange = function onEmailChange(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      email: e.target.value\n    }));\n  };\n\n  var onPasswordChange = function onPasswordChange(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      password: e.target.value\n    }));\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    loginUser();\n  };\n\n  var loginUser = function loginUser() {\n    var options = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    axios.post(\"/api/auth/login\", JSON.stringify(formData), options).then(function (res) {\n      alert(\"Login Successful\");\n      isLoggedIn().then(function () {\n        if (email && userGlobal && !userGlobal.isSubscribed) {\n          subscribeNewsletter().then(function () {\n            if (userGlobal && !userGlobal.isSubscribed) {\n              setUser(_objectSpread(_objectSpread({}, userGlobal), {}, {\n                isSubscribed: true\n              }));\n            }\n          });\n        }\n\n        history.push(\"/\");\n      });\n    })[\"catch\"](function (err) {\n      if (err.response && err.response.status) {\n        if (err.response.status === 401 || err.response.status === 400) {\n          alert(err.response.data.error);\n        } else if (err.response.status !== 200) {\n          throw Error(err);\n        }\n      } else {\n        console.log(err);\n      }\n    });\n  };\n\n  var isLoggedIn = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.get(\"/api/auth/isloggedin\").then(function (response) {\n                if (response.status !== 200) {\n                  setIsLoggedIn(false);\n                } else {\n                  setIsLoggedIn(true);\n                  setUser(response.data.user); // socket && socket.emit(\"join\", { _id: response.data.user._id, tokenCreated: response.data.user.tokenCreated });\n                  // fetchBlogArticles();\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function isLoggedIn() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var contents = __jsx(\"div\", {\n    className: \"\".concat(styles[\"main-pane-item\"], \" \").concat(styles[\"main-pane-item-centered\"])\n  }, __jsx(\"div\", {\n    className: \"\".concat(styles[\"register-login-form\"])\n  }, __jsx(\"h2\", null, \"LOGIN\"), __jsx(\"div\", {\n    className: \"\".concat(styles[\"register-login-form-padded\"])\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: styles[\"headline-form\"]\n  }, __jsx(\"div\", {\n    className: styles[\"horizontal\"]\n  }, __jsx(\"label\", null, \"Email: \"), __jsx(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"text\",\n    value: formData.email,\n    onChange: onEmailChange\n  })), __jsx(\"div\", {\n    className: styles[\"horizontal\"]\n  }, __jsx(\"label\", null, \"Password: \"), __jsx(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"password\",\n    value: formData.password,\n    onChange: onPasswordChange\n  })), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"Login\",\n    className: styles[\"submit-button\"]\n  })), __jsx(\"div\", {\n    className: styles[\"register-login-form-text\"]\n  }, __jsx(\"label\", null, __jsx(Link, {\n    href: \"/requestemail\"\n  }, __jsx(\"a\", null, \"Forgot your password or locked out?\"))), __jsx(\"label\", null, __jsx(\"a\", null, __jsx(Link, {\n    href: \"/signup\"\n  }, \"Don't have an account?\")))))));\n\n  return __jsx(Page, {\n    sidebarFixTopOffset: 0,\n    mainPane: contents\n  });\n};\n\n_s(Login, \"HEXZVjojFVfjJXSwp10s9bk0KW4=\", false, function () {\n  return [useRouter];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/login.js"],"names":["React","useState","useEffect","useContext","Page","styles","useRouter","Link","LoginContext","setIsLoggedInAction","setUserAction","axios","Login","props","history","email","query","loginState","loginDispatch","isLoggedInGlobal","isLoggedIn","userGlobal","user","setIsLoggedIn","setTo","setUser","formData","password","subscribeNewsletter","then","isSubscribed","alert","push","setFormData","toPost","options","headers","post","JSON","stringify","res","err","response","status","data","error","Error","console","log","onEmailChange","e","target","value","onPasswordChange","handleSubmit","preventDefault","loginUser","get","contents"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,MAAP,MAAmB,oCAAnB,C,CACA;AACA;;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,YAAT,QAA6B,mCAA7B;AACA,SAASC,mBAAT,EAA8BC,aAA9B,QAAmD,qBAAnD,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,KAAD,EAAW;AAAA;;AACvB,MAAMC,OAAO,GAAGR,SAAS,EAAzB;AADuB,MAEfS,KAFe,GAELD,OAAO,CAACE,KAFH,CAEfD,KAFe;;AAAA,oBAGaZ,UAAU,CAACK,YAAD,CAHvB;AAAA,MAGhBS,UAHgB;AAAA,MAGJC,aAHI;;AAIvB,MAAMC,gBAAgB,GAAGF,UAAU,CAACG,UAApC;AACA,MAAMC,UAAU,GAAGJ,UAAU,CAACK,IAA9B;;AACA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD;AAAA,WAAWN,aAAa,CAACT,mBAAmB,CAACe,KAAD,CAApB,CAAxB;AAAA,GAAtB;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAACD,KAAD;AAAA,WAAWN,aAAa,CAACR,aAAa,CAACc,KAAD,CAAd,CAAxB;AAAA,GAAhB,CAPuB,CAQvB;;;AACAtB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIiB,gBAAgB,IAAIO,QAAQ,CAACC,QAAT,KAAsB,EAA9C,EAAkD;AAChD,UAAIZ,KAAJ,EAAW;AACTa,QAAAA,mBAAmB,GAAGC,IAAtB,CAA2B,YAAM;AAC/B,cAAIR,UAAU,IAAI,CAACA,UAAU,CAACS,YAA9B,EAA4C;AAC1CL,YAAAA,OAAO,iCAAMJ,UAAN;AAAkBS,cAAAA,YAAY,EAAE;AAAhC,eAAP;AACD;AACF,SAJD;AAKD,OAND,MAMO;AACLC,QAAAA,KAAK,CAAC,2BAAD,CAAL;AACD;;AACDjB,MAAAA,OAAO,CAACkB,IAAR,CAAa,GAAb;AACD;AACF,GAbQ,EAaN,CAACb,gBAAD,CAbM,CAAT;;AATuB,kBAuBSlB,QAAQ,CAAC;AACvCc,IAAAA,KAAK,EAAE,EADgC;AAEvCY,IAAAA,QAAQ,EAAE;AAF6B,GAAD,CAvBjB;AAAA,MAuBhBD,QAvBgB;AAAA,MAuBNO,WAvBM;;AA4BvB,MAAML,mBAAmB;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBM,cAAAA,MADoB,GACX;AAAEJ,gBAAAA,YAAY,EAAE;AAAhB,eADW;AAEpBK,cAAAA,OAFoB,GAEV;AACdC,gBAAAA,OAAO,EAAE;AAAE,kCAAgB;AAAlB;AADK,eAFU;AAAA;AAAA,qBAMpBzB,KAAK,CACR0B,IADG,CACE,qBADF,EACyBC,IAAI,CAACC,SAAL,CAAeL,MAAf,CADzB,EACiDC,OADjD,EAEHN,IAFG,CAEE,UAACW,GAAD,EAAS;AACbT,gBAAAA,KAAK,CAAC,0BAAD,CAAL;AACD,eAJG,WAKG,UAACU,GAAD,EAAS;AACd,oBAAGA,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,CAAaC,MAAhC,EAAuC;AACrC,sBAAIF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAAxB,IAA+BF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA3D,EAAgE;AAC9DZ,oBAAAA,KAAK,CAACU,GAAG,CAACC,QAAJ,CAAaE,IAAb,CAAkBC,KAAnB,CAAL;AACD,mBAFD,MAEO,IAAIJ,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AACtC,0BAAMG,KAAK,CAACL,GAAD,CAAX;AACD;AACF,iBAND,MAMO;AACLM,kBAAAA,OAAO,CAACC,GAAR,CAAYP,GAAZ;AACD;AAEF,eAhBG,CANoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAnBb,mBAAmB;AAAA;AAAA;AAAA,KAAzB;;AAyBA1B,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIa,KAAJ,EAAW;AACTkB,MAAAA,WAAW,iCAAMP,QAAN;AAAgBX,QAAAA,KAAK,EAAEA;AAAvB,SAAX;AACD;AACF,GAJQ,EAIN,CAACA,KAAD,CAJM,CAAT;;AAMA,MAAMkC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,EAAO;AAC3BjB,IAAAA,WAAW,iCAAMP,QAAN;AAAgBX,MAAAA,KAAK,EAAEmC,CAAC,CAACC,MAAF,CAASC;AAAhC,OAAX;AACD,GAFD;;AAIA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACH,CAAD,EAAO;AAC9BjB,IAAAA,WAAW,iCAAMP,QAAN;AAAgBC,MAAAA,QAAQ,EAAEuB,CAAC,CAACC,MAAF,CAASC;AAAnC,OAAX;AACD,GAFD;;AAIA,MAAME,YAAY,GAAG,SAAfA,YAAe,CAACJ,CAAD,EAAO;AAC1BA,IAAAA,CAAC,CAACK,cAAF;AACAC,IAAAA,SAAS;AACV,GAHD;;AAKA,MAAMA,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,QAAMrB,OAAO,GAAG;AACdC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AADK,KAAhB;AAIAzB,IAAAA,KAAK,CACF0B,IADH,CACQ,iBADR,EAC2BC,IAAI,CAACC,SAAL,CAAeb,QAAf,CAD3B,EACqDS,OADrD,EAEGN,IAFH,CAEQ,UAACW,GAAD,EAAS;AACbT,MAAAA,KAAK,CAAC,kBAAD,CAAL;AAEAX,MAAAA,UAAU,GAAGS,IAAb,CAAkB,YAAM;AACtB,YAAId,KAAK,IAAIM,UAAT,IAAuB,CAACA,UAAU,CAACS,YAAvC,EAAqD;AACnDF,UAAAA,mBAAmB,GAAGC,IAAtB,CAA2B,YAAM;AAC/B,gBAAIR,UAAU,IAAI,CAACA,UAAU,CAACS,YAA9B,EAA4C;AAC1CL,cAAAA,OAAO,iCAAMJ,UAAN;AAAkBS,gBAAAA,YAAY,EAAE;AAAhC,iBAAP;AACD;AACF,WAJD;AAKD;;AACDhB,QAAAA,OAAO,CAACkB,IAAR,CAAa,GAAb;AACD,OATD;AAUD,KAfH,WAgBS,UAACS,GAAD,EAAS;AACd,UAAGA,GAAG,CAACC,QAAJ,IAAgBD,GAAG,CAACC,QAAJ,CAAaC,MAAhC,EAAuC;AACrC,YAAIF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAAxB,IAA+BF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA3D,EAAgE;AAC9DZ,UAAAA,KAAK,CAACU,GAAG,CAACC,QAAJ,CAAaE,IAAb,CAAkBC,KAAnB,CAAL;AACD,SAFD,MAEO,IAAIJ,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AACtC,gBAAMG,KAAK,CAACL,GAAD,CAAX;AACD;AACF,OAND,MAMO;AACLM,QAAAA,OAAO,CAACC,GAAR,CAAYP,GAAZ;AACD;AACF,KA1BH;AA2BD,GAhCD;;AAkCA,MAAMrB,UAAU;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACXT,KAAK,CAAC8C,GAAN,CAAU,sBAAV,EAAkC5B,IAAlC,CAAuC,UAACa,QAAD,EAAc;AACzD,oBAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BpB,kBAAAA,aAAa,CAAC,KAAD,CAAb;AACD,iBAFD,MAEO;AACLA,kBAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,kBAAAA,OAAO,CAACiB,QAAQ,CAACE,IAAT,CAActB,IAAf,CAAP,CAFK,CAGL;AACA;AACD;AACF,eATK,CADW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVF,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAYA,MAAMsC,QAAQ,GACZ;AACE,IAAA,SAAS,YAAKrD,MAAM,CAAC,gBAAD,CAAX,cAAiCA,MAAM,CAAC,yBAAD,CAAvC;AADX,KAGE;AAAK,IAAA,SAAS,YAAKA,MAAM,CAAC,qBAAD,CAAX;AAAd,KACE,0BADF,EAEE;AAAK,IAAA,SAAS,YAAKA,MAAM,CAAC,4BAAD,CAAX;AAAd,KACE;AAAM,IAAA,QAAQ,EAAEiD,YAAhB;AAA8B,IAAA,SAAS,EAAEjD,MAAM,CAAC,eAAD;AAA/C,KACE;AAAK,IAAA,SAAS,EAAEA,MAAM,CAAC,YAAD;AAAtB,KACE,+BADF,EAEE;AACE,IAAA,SAAS,EAAEA,MAAM,CAAC,qBAAD,CADnB;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,KAAK,EAAEqB,QAAQ,CAACX,KAHlB;AAIE,IAAA,QAAQ,EAAEkC;AAJZ,IAFF,CADF,EAUE;AAAK,IAAA,SAAS,EAAE5C,MAAM,CAAC,YAAD;AAAtB,KACE,kCADF,EAEE;AACE,IAAA,SAAS,EAAEA,MAAM,CAAC,qBAAD,CADnB;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAEqB,QAAQ,CAACC,QAHlB;AAIE,IAAA,QAAQ,EAAE0B;AAJZ,IAFF,CAVF,EAmBE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,KAAK,EAAC,OAFR;AAGE,IAAA,SAAS,EAAEhD,MAAM,CAAC,eAAD;AAHnB,IAnBF,CADF,EA0BE;AAAK,IAAA,SAAS,EAAEA,MAAM,CAAC,0BAAD;AAAtB,KACE,qBACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAE;AAAZ,KACE,uDADF,CADF,CADF,EAME,qBACE,iBACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAE;AAAZ,8BADF,CADF,CANF,CA1BF,CAFF,CAHF,CADF;;AAiDA,SAAO,MAAC,IAAD;AAAM,IAAA,mBAAmB,EAAE,CAA3B;AAA8B,IAAA,QAAQ,EAAEqD;AAAxC,IAAP;AACD,CAxKD;;GAAM9C,K;UACYN,S;;;KADZM,K;AA0KN,eAAeA,KAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport Page from \"../components/Page/Page\";\nimport styles from \"../components/Page/Page.module.css\";\n// import { Link } from \"react-router-dom\";\n// import { useHistory, useParams } from \"react-router-dom\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport { LoginContext } from \"../contexts/reducers/loginContext\";\nimport { setIsLoggedInAction, setUserAction } from \"../contexts/actions\";\n// import { fetchBlogArticles } from \"./_app.js\";\nimport axios from \"axios\";\n\nconst Login = (props) => {\n  const history = useRouter();\n  const { email } = history.query;\n  const [loginState, loginDispatch] = useContext(LoginContext);\n  const isLoggedInGlobal = loginState.isLoggedIn;\n  const userGlobal = loginState.user;\n  const setIsLoggedIn = (setTo) => loginDispatch(setIsLoggedInAction(setTo));\n  const setUser = (setTo) => loginDispatch(setUserAction(setTo));\n  // const socket = useSelector((state) => state.network.socket);\n  useEffect(() => {\n    if (isLoggedInGlobal && formData.password === \"\") {\n      if (email) {\n        subscribeNewsletter().then(() => {\n          if (userGlobal && !userGlobal.isSubscribed) {\n            setUser({ ...userGlobal, isSubscribed: true });\n          }\n        });\n      } else {\n        alert(\"You are already logged in\");\n      }\n      history.push(\"/\");\n    }\n  }, [isLoggedInGlobal]);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const subscribeNewsletter = async () => {\n    const toPost = { isSubscribed: true };\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n\n    await axios\n      .post(\"/api/auth/subscribe\", JSON.stringify(toPost), options)\n      .then((res) => {\n        alert(\"Subscribed to newsletter\");\n      })\n      .catch((err) => {\n        if(err.response && err.response.status){\n          if (err.response.status === 401 || err.response.status === 400) {\n            alert(err.response.data.error);\n          } else if (err.response.status !== 200) {\n            throw Error(err);\n          }\n        } else {\n          console.log(err);\n        }\n     \n      });\n  };\n\n  useEffect(() => {\n    if (email) {\n      setFormData({ ...formData, email: email });\n    }\n  }, [email]);\n\n  const onEmailChange = (e) => {\n    setFormData({ ...formData, email: e.target.value });\n  };\n\n  const onPasswordChange = (e) => {\n    setFormData({ ...formData, password: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    loginUser();\n  };\n\n  const loginUser = () => {\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n\n    axios\n      .post(\"/api/auth/login\", JSON.stringify(formData), options)\n      .then((res) => {\n        alert(\"Login Successful\");\n\n        isLoggedIn().then(() => {\n          if (email && userGlobal && !userGlobal.isSubscribed) {\n            subscribeNewsletter().then(() => {\n              if (userGlobal && !userGlobal.isSubscribed) {\n                setUser({ ...userGlobal, isSubscribed: true });\n              }\n            });\n          }\n          history.push(\"/\");\n        });\n      })\n      .catch((err) => {\n        if(err.response && err.response.status){\n          if (err.response.status === 401 || err.response.status === 400) {\n            alert(err.response.data.error);\n          } else if (err.response.status !== 200) {\n            throw Error(err);\n          }\n        } else {\n          console.log(err);\n        }\n      });\n  };\n\n  const isLoggedIn = async () => {\n    await axios.get(\"/api/auth/isloggedin\").then((response) => {\n      if (response.status !== 200) {\n        setIsLoggedIn(false);\n      } else {\n        setIsLoggedIn(true);\n        setUser(response.data.user);\n        // socket && socket.emit(\"join\", { _id: response.data.user._id, tokenCreated: response.data.user.tokenCreated });\n        // fetchBlogArticles();\n      }\n    });\n  };\n  const contents = (\n    <div\n      className={`${styles[\"main-pane-item\"]} ${styles[\"main-pane-item-centered\"]}`}\n    >\n      <div className={`${styles[\"register-login-form\"]}`}>\n        <h2>LOGIN</h2>\n        <div className={`${styles[\"register-login-form-padded\"]}`}>\n          <form onSubmit={handleSubmit} className={styles[\"headline-form\"]}>\n            <div className={styles[\"horizontal\"]}>\n              <label>Email: </label>\n              <input\n                className={styles[\"headline-form-input\"]}\n                type=\"text\"\n                value={formData.email}\n                onChange={onEmailChange}\n              />\n            </div>\n            <div className={styles[\"horizontal\"]}>\n              <label>Password: </label>\n              <input\n                className={styles[\"headline-form-input\"]}\n                type=\"password\"\n                value={formData.password}\n                onChange={onPasswordChange}\n              />\n            </div>\n            <input\n              type=\"submit\"\n              value=\"Login\"\n              className={styles[\"submit-button\"]}\n            />\n          </form>\n          <div className={styles[\"register-login-form-text\"]}>\n            <label>\n              <Link href={\"/requestemail\"}>\n                <a>Forgot your password or locked out?</a>\n              </Link>\n            </label>\n            <label>\n              <a>\n                <Link href={\"/signup\"}>Don't have an account?</Link>\n              </a>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return <Page sidebarFixTopOffset={0} mainPane={contents} />;\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}