{"ast":null,"code":"import verify from \"../verification/verifyToken.js\";\n\nconst handler = (req, res) => {\n  try {\n    // try {\n    //   const io = req.app.get(\"socketio\");\n    //   io.sockets\n    //     .in(`${req.user._id}.${req.user.tokenCreated}`)\n    //     .emit(\"logged out\", { msg: \"User logged out\" });\n    //   console.log(\"User left room\");\n    // } catch (error) {\n    //   console.log(error);\n    // }\n    // res.setHeader(\n    //   \"Set-Cookie\",\n    //   serialize(\n    //     \"token\",\n    //     {},\n    //     { path: \"/\" },\n    //     { httpOnly: true},\n    //     {expires: Date.now() }\n    //   )\n    // );\n    res.setHeader(\"Set-Cookie\", \"token=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\").then(res.json({\n      token: token\n    }));\n  } catch (err) {\n    res.send(err);\n  }\n};\n\nexport default verify(handler);","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/api/auth/logout.js"],"names":["verify","handler","req","res","setHeader","then","json","token","err","send"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,gCAAnB;;AAEA,MAAMC,OAAO,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5B,MAAI;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,IAAAA,GAAG,CACAC,SADH,CAEI,YAFJ,EAGI,8DAHJ,EAKGC,IALH,CAKQF,GAAG,CAACG,IAAJ,CAAS;AAAEC,MAAAA,KAAK,EAAEA;AAAT,KAAT,CALR;AAMD,GA5BD,CA4BE,OAAOC,GAAP,EAAY;AACZL,IAAAA,GAAG,CAACM,IAAJ,CAASD,GAAT;AACD;AACF,CAhCD;;AAkCA,eAAeR,MAAM,CAACC,OAAD,CAArB","sourcesContent":["import verify from \"../verification/verifyToken.js\";\n\nconst handler = (req, res) => {\n  try {\n    // try {\n    //   const io = req.app.get(\"socketio\");\n    //   io.sockets\n    //     .in(`${req.user._id}.${req.user.tokenCreated}`)\n    //     .emit(\"logged out\", { msg: \"User logged out\" });\n    //   console.log(\"User left room\");\n    // } catch (error) {\n    //   console.log(error);\n    // }\n\n    // res.setHeader(\n    //   \"Set-Cookie\",\n    //   serialize(\n    //     \"token\",\n    //     {},\n    //     { path: \"/\" },\n    //     { httpOnly: true},\n    //     {expires: Date.now() }\n    //   )\n    // );\n\n    res\n      .setHeader(\n        \"Set-Cookie\",\n        \"token=deleted; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\n      )\n      .then(res.json({ token: token }));\n  } catch (err) {\n    res.send(err);\n  }\n};\n\nexport default verify(handler);\n"]},"metadata":{},"sourceType":"module"}