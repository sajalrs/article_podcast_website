{"ast":null,"code":"import connectDb from \"./middlewares/dbMiddleware.js\";\n\nconst mongoose = require(\"mongoose\");\n\nlet YoutubeLink;\n\ntry {\n  YoutubeLink = mongoose.model(\"YoutubeLinks\");\n} catch {\n  YoutubeLink = require(\"./models/YoutubeLinks\");\n}\n\nconst handler = async (req, res) => {\n  const query = YoutubeLink.find({}).sort(\"-date\");\n  await query.exec((err, data) => {\n    if (err) {\n      res.send(err);\n    } else {\n      res.send({\n        items: data\n      });\n    }\n  });\n}; // router.get(\"/edit\", (req,res) => {\n//   YoutubeLink.find({}, (err, data) => {\n//     if(err){\n//       res.send(err)\n//     } else {\n//       data.forEach((element, index) => {\n//          fetch(`https://www.googleapis.com/youtube/v3/videos?part=id%2Csnippet&id=${element[\"id\"]}&key=${process.env.YOUTUBE_API}`)\n//           .then(response => response.json())\n//            .then(data => {\n//              const title = data[\"items\"][0][\"snippet\"][\"title\"]\n//              const date = data[\"items\"][0][\"snippet\"][\"publishedAt\"]\n//              console.log(`title: ${title}`)\n//              console.log(`date: ${date}`)\n//         element.title = title;\n//         element.date = date;\n//         element.save((error, returned) => {\n//           if(error){\n//             res.send(err);\n//           }else {\n//             console.log(returned);\n//           }\n//         })\n//             })\n//       })\n//       res.send(\"success\");\n//     }\n//   })\n// })\n\n\nexport default connectDb(handler);","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/api/youtube.js"],"names":["connectDb","mongoose","require","YoutubeLink","model","handler","req","res","query","find","sort","exec","err","data","send","items"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,+BAAtB;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAIC,WAAJ;;AACA,IAAI;AACFA,EAAAA,WAAW,GAAGF,QAAQ,CAACG,KAAT,CAAe,cAAf,CAAd;AACD,CAFD,CAEE,MAAM;AACND,EAAAA,WAAW,GAAGD,OAAO,CAAC,uBAAD,CAArB;AACD;;AAED,MAAMG,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAMC,KAAK,GAAGL,WAAW,CAACM,IAAZ,CAAiB,EAAjB,EAAqBC,IAArB,CAA0B,OAA1B,CAAd;AACA,QAAMF,KAAK,CAACG,IAAN,CAAW,CAACC,GAAD,EAAMC,IAAN,KAAe;AAC9B,QAAID,GAAJ,EAAS;AACPL,MAAAA,GAAG,CAACO,IAAJ,CAASF,GAAT;AACD,KAFD,MAEO;AACLL,MAAAA,GAAG,CAACO,IAAJ,CAAS;AAAEC,QAAAA,KAAK,EAAEF;AAAT,OAAT;AACD;AACF,GANK,CAAN;AAOD,CATD,C,CAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAEA,eAAeb,SAAS,CAACK,OAAD,CAAxB","sourcesContent":["import connectDb from \"./middlewares/dbMiddleware.js\";\nconst mongoose = require(\"mongoose\");\nlet YoutubeLink;\ntry {\n  YoutubeLink = mongoose.model(\"YoutubeLinks\");\n} catch {\n  YoutubeLink = require(\"./models/YoutubeLinks\");\n}\n\nconst handler = async (req, res) => {\n  const query = YoutubeLink.find({}).sort(\"-date\");\n  await query.exec((err, data) => {\n    if (err) {\n      res.send(err);\n    } else {\n      res.send({ items: data });\n    }\n  });\n};\n\n// router.get(\"/edit\", (req,res) => {\n//   YoutubeLink.find({}, (err, data) => {\n//     if(err){\n//       res.send(err)\n//     } else {\n//       data.forEach((element, index) => {\n//          fetch(`https://www.googleapis.com/youtube/v3/videos?part=id%2Csnippet&id=${element[\"id\"]}&key=${process.env.YOUTUBE_API}`)\n//           .then(response => response.json())\n//            .then(data => {\n//              const title = data[\"items\"][0][\"snippet\"][\"title\"]\n//              const date = data[\"items\"][0][\"snippet\"][\"publishedAt\"]\n//              console.log(`title: ${title}`)\n//              console.log(`date: ${date}`)\n//         element.title = title;\n//         element.date = date;\n//         element.save((error, returned) => {\n//           if(error){\n//             res.send(err);\n//           }else {\n//             console.log(returned);\n//           }\n//         })\n//             })\n\n//       })\n//       res.send(\"success\");\n//     }\n//   })\n// })\n\nexport default connectDb(handler);\n"]},"metadata":{},"sourceType":"module"}