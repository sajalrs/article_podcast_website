{"ast":null,"code":"import { serialize } from \"cookie\";\n\nconst cookie = (res, name, value, options = {}) => {\n  const stringValue = typeof value === \"object\" ? \"j:\" + JSON.stringify(value) : String(value);\n  console.log(stringValue);\n\n  if (\"maxAge\" in options) {\n    options.expires = new Date(Date.now() + options.maxAge);\n  }\n\n  res.setHeader(\"Set-Cookie\", serialize(name, String(stringValue), options));\n};\n\nconst withCookies = handler => (req, res) => {\n  res.cookie = (name, value, options) => cookie(res, name, value, options);\n\n  return handler(req, res);\n};\n\nexport default withCookies;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/api/middlewares/cookiesMiddleware.js"],"names":["serialize","cookie","res","name","value","options","stringValue","JSON","stringify","String","console","log","expires","Date","now","maxAge","setHeader","withCookies","handler","req"],"mappings":"AAAA,SAASA,SAAT,QAA0B,QAA1B;;AAEA,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAMC,IAAN,EAAYC,KAAZ,EAAmBC,OAAO,GAAG,EAA7B,KAAoC;AACjD,QAAMC,WAAW,GACf,OAAOF,KAAP,KAAiB,QAAjB,GAA4B,OAAOG,IAAI,CAACC,SAAL,CAAeJ,KAAf,CAAnC,GAA2DK,MAAM,CAACL,KAAD,CADnE;AAGAM,EAAAA,OAAO,CAACC,GAAR,CAAYL,WAAZ;;AACA,MAAI,YAAYD,OAAhB,EAAyB;AACvBA,IAAAA,OAAO,CAACO,OAAR,GAAkB,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,KAAaT,OAAO,CAACU,MAA9B,CAAlB;AACD;;AAEDb,EAAAA,GAAG,CAACc,SAAJ,CAAc,YAAd,EAA4BhB,SAAS,CAACG,IAAD,EAAOM,MAAM,CAACH,WAAD,CAAb,EAA4BD,OAA5B,CAArC;AACD,CAVD;;AAYA,MAAMY,WAAW,GAAIC,OAAD,IAAa,CAACC,GAAD,EAAMjB,GAAN,KAAc;AAC7CA,EAAAA,GAAG,CAACD,MAAJ,GAAa,CAACE,IAAD,EAAOC,KAAP,EAAcC,OAAd,KAA0BJ,MAAM,CAACC,GAAD,EAAMC,IAAN,EAAYC,KAAZ,EAAmBC,OAAnB,CAA7C;;AACA,SAAOa,OAAO,CAACC,GAAD,EAAMjB,GAAN,CAAd;AACD,CAHD;;AAKA,eAAee,WAAf","sourcesContent":["import { serialize } from \"cookie\";\n\nconst cookie = (res, name, value, options = {}) => {\n  const stringValue =\n    typeof value === \"object\" ? \"j:\" + JSON.stringify(value) : String(value);\n\n  console.log(stringValue);\n  if (\"maxAge\" in options) {\n    options.expires = new Date(Date.now() + options.maxAge);\n  }\n\n  res.setHeader(\"Set-Cookie\", serialize(name, String(stringValue), options));\n};\n\nconst withCookies = (handler) => (req, res) => {\n  res.cookie = (name, value, options) => cookie(res, name, value, options);\n  return handler(req, res);\n};\n\nexport default withCookies;\n"]},"metadata":{},"sourceType":"module"}