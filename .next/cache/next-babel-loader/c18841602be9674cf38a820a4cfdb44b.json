{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport Page from \"../components/Page/Page\";\nimport styles from \"../components/Page/Page.module.css\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\n\nvar NewPassword = function NewPassword(props) {\n  _s();\n\n  var history = useHistory();\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      token = _useParams.token;\n\n  var _useState = useState({\n    password: \"\",\n    reenteredPassword: \"\"\n  }),\n      formData = _useState[0],\n      setFormData = _useState[1];\n\n  var onPasswordChange = function onPasswordChange(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      password: e.target.value\n    }));\n  };\n\n  var onReenteredPasswordChange = function onReenteredPasswordChange(e) {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      reenteredPassword: e.target.value\n    }));\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    if (formData.password === formData.reenteredPassword) {\n      resetPassword();\n    } else {\n      alert(\"Password and re-typed password don't match\");\n    }\n  };\n\n  var resetPassword = function resetPassword() {\n    var toPost = {\n      id: id,\n      token: token,\n      password: formData.password\n    };\n    var options = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    axios.post(\"/api/auth/resetpassword\", JSON.stringify(toPost), options).then(function (res) {\n      alert(\"Password changed successfully\");\n      history.push(\"/\");\n    })[\"catch\"](function (err) {\n      if (err.response.status === 401 || err.response.status === 400) {\n        alert(err.response.data.error);\n      } else if (err.response.status !== 200) {\n        throw Error(err);\n      }\n    });\n  };\n\n  var contents = __jsx(\"div\", {\n    className: \"\".concat(styles[\"main-pane-item\"], \" \").concat(styles[\"main-pane-item-centered\"])\n  }, __jsx(\"div\", {\n    className: \"\".concat(styles[\"register-login-form\"])\n  }, __jsx(\"h2\", null, \"RESET PASSWORD\"), __jsx(\"div\", {\n    className: \"\".concat(styles[\"register-login-form-padded\"])\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: styles[\"headline-form\"]\n  }, __jsx(\"div\", {\n    className: styles[\"horizontal\"]\n  }, __jsx(\"label\", null, \"New Password: \"), __jsx(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"password\",\n    value: formData.password,\n    onChange: onPasswordChange\n  })), __jsx(\"div\", {\n    className: styles[\"horizontal\"]\n  }, __jsx(\"label\", null, \"Re-enter Password: \"), __jsx(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"password\",\n    value: formData.reenteredPassword,\n    onChange: onReenteredPasswordChange\n  })), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"Reset\",\n    className: styles[\"submit-button\"]\n  })))));\n\n  return __jsx(Page, {\n    sidebarFixTopOffset: 0,\n    mainPane: contents\n  });\n};\n\n_s(NewPassword, \"OK9p594Yyty6xRirtnYBOxTFQd4=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = NewPassword;\nexport default NewPassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewPassword\");","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/resetpassword.js"],"names":["React","useState","Page","styles","useParams","useHistory","axios","NewPassword","props","history","id","token","password","reenteredPassword","formData","setFormData","onPasswordChange","e","target","value","onReenteredPasswordChange","handleSubmit","preventDefault","resetPassword","alert","toPost","options","headers","post","JSON","stringify","then","res","push","err","response","status","data","error","Error","contents"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Page from \"../components/Page/Page\";\nimport styles from \"../components/Page/Page.module.css\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nconst NewPassword = (props) => {\n  const history = useHistory();\n  const {id, token} = useParams();\n  const [formData, setFormData] = useState({\n    password: \"\",\n    reenteredPassword: \"\",\n  });\n\n  \n  const onPasswordChange = (e) => {\n    setFormData({ ...formData, password: e.target.value });\n  };\n\n  const onReenteredPasswordChange = (e) => {\n    setFormData({ ...formData, reenteredPassword: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (formData.password === formData.reenteredPassword) {\n      resetPassword();\n    } else {\n      alert(\"Password and re-typed password don't match\");\n    }\n  };\n\n  const resetPassword = () => {\n    const toPost = {\n      id: id,\n      token: token,  \n      password: formData.password,\n    };\n\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n\n    axios\n      .post(\"/api/auth/resetpassword\", JSON.stringify(toPost), options)\n      .then((res) => {\n        alert(\"Password changed successfully\");\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        if (err.response.status === 401 || err.response.status === 400) {\n          alert(err.response.data.error);\n        } else if (err.response.status !== 200) {\n          throw Error(err);\n        }\n      });\n  };\n\n  const contents = (\n    <div\n      className={`${styles[\"main-pane-item\"]} ${styles[\"main-pane-item-centered\"]}`}\n    >\n      <div className={`${styles[\"register-login-form\"]}`}>\n        <h2>RESET PASSWORD</h2>\n        <div className={`${styles[\"register-login-form-padded\"]}`}>\n          <form onSubmit={handleSubmit} className={styles[\"headline-form\"]}>\n         \n            <div className={styles[\"horizontal\"]}>\n              <label>New Password: </label>\n              <input\n                className={styles[\"headline-form-input\"]}\n                type=\"password\"\n                value={formData.password}\n                onChange={onPasswordChange}\n              />\n            </div>\n            <div className={styles[\"horizontal\"]}>\n              <label>Re-enter Password: </label>\n              <input\n                className={styles[\"headline-form-input\"]}\n                type=\"password\"\n                value={formData.reenteredPassword}\n                onChange={onReenteredPasswordChange}\n              />\n            </div>\n\n\n            <input\n              type=\"submit\"\n              value=\"Reset\"\n              className={styles[\"submit-button\"]}\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n\n  return <Page sidebarFixTopOffset={0} mainPane={contents} />;\n};\n\nexport default NewPassword;\n"]},"metadata":{},"sourceType":"module"}