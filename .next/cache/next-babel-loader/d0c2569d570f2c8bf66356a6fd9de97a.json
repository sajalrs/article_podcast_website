{"ast":null,"code":"import connectDb from \"../middlewares/dbMiddleware.js\";\nimport verify from \"../verification/verifyToken.js\";\n\nconst mongoose = require(\"mongoose\");\n\nlet User;\n\ntry {\n  User = mongoose.model(\"Users\");\n} catch {\n  User = require(\"../models/Users\");\n}\n\nconst handler = async (req, res) => {\n  try {\n    const user = await User.findById(req.user._id);\n    res.json({\n      user: {\n        _id: user._id,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        email: user.email,\n        isModerator: user.isModerator,\n        isSubscribed: user.isSubscribed,\n        createdAt: user.createdAt,\n        updatedAt: user.updatedAt,\n        tokenCreated: req.user.tokenCreated\n      }\n    });\n  } catch (err) {\n    res.send(err);\n  }\n};\n\nexport default verify(connectDb(handler));","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/api/auth/isloggedin.js"],"names":["connectDb","verify","mongoose","require","User","model","handler","req","res","user","findById","_id","json","firstName","lastName","email","isModerator","isSubscribed","createdAt","updatedAt","tokenCreated","err","send"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,gCAAtB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,IAAIC,IAAJ;;AACA,IAAI;AACFA,EAAAA,IAAI,GAAGF,QAAQ,CAACG,KAAT,CAAe,OAAf,CAAP;AACD,CAFD,CAEE,MAAM;AACND,EAAAA,IAAI,GAAGD,OAAO,CAAC,iBAAD,CAAd;AACD;;AAED,MAAMG,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAChC,MAAI;AACF,UAAMC,IAAI,GAAG,MAAML,IAAI,CAACM,QAAL,CAAcH,GAAG,CAACE,IAAJ,CAASE,GAAvB,CAAnB;AACAH,IAAAA,GAAG,CAACI,IAAJ,CAAS;AACPH,MAAAA,IAAI,EAAE;AACJE,QAAAA,GAAG,EAAEF,IAAI,CAACE,GADN;AAEJE,QAAAA,SAAS,EAAEJ,IAAI,CAACI,SAFZ;AAGJC,QAAAA,QAAQ,EAAEL,IAAI,CAACK,QAHX;AAIJC,QAAAA,KAAK,EAAEN,IAAI,CAACM,KAJR;AAKJC,QAAAA,WAAW,EAAEP,IAAI,CAACO,WALd;AAMJC,QAAAA,YAAY,EAAER,IAAI,CAACQ,YANf;AAOJC,QAAAA,SAAS,EAAET,IAAI,CAACS,SAPZ;AAQJC,QAAAA,SAAS,EAAEV,IAAI,CAACU,SARZ;AASJC,QAAAA,YAAY,EAAEb,GAAG,CAACE,IAAJ,CAASW;AATnB;AADC,KAAT;AAaD,GAfD,CAeE,OAAOC,GAAP,EAAY;AACZb,IAAAA,GAAG,CAACc,IAAJ,CAASD,GAAT;AACD;AACF,CAnBH;;AAqBE,eAAepB,MAAM,CAACD,SAAS,CAACM,OAAD,CAAV,CAArB","sourcesContent":["import connectDb from \"../middlewares/dbMiddleware.js\";\nimport verify from \"../verification/verifyToken.js\";\nconst mongoose = require(\"mongoose\");\n\nlet User;\ntry {\n  User = mongoose.model(\"Users\");\n} catch {\n  User = require(\"../models/Users\");\n}\n\nconst handler = async (req, res) => {\n    try {\n      const user = await User.findById(req.user._id);\n      res.json({\n        user: {\n          _id: user._id,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          email: user.email,\n          isModerator: user.isModerator,\n          isSubscribed: user.isSubscribed,\n          createdAt: user.createdAt,\n          updatedAt: user.updatedAt,\n          tokenCreated: req.user.tokenCreated,\n        },\n      });\n    } catch (err) {\n      res.send(err);\n    }\n  };\n\n  export default verify(connectDb(handler));"]},"metadata":{},"sourceType":"module"}