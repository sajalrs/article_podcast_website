{"ast":null,"code":"import { ApolloServer } from \"apollo-server-micro\";\nimport { PubSub } from \"apollo-server\";\n\nrequire(\"dotenv/config\");\n\nimport { typeDefs } from \"./typeDefs\";\nimport { resolvers } from \"./resolvers\";\nimport connectDb from \"../middlewares/dbMiddleware.js\";\nimport withCookies from \"../middlewares/cookiesMiddleware\";\nimport verify from \"../verification/verifyTokenGraphql\";\nconst pubsub = new PubSub();\n\nconst context = ctx => {\n  return {\n    cookie: ctx.res.cookie,\n    authData: ctx.req.authData,\n    pubsub: pubsub\n  };\n};\n\nconst apolloServer = new ApolloServer({\n  typeDefs,\n  resolvers,\n  context\n});\nexport const config = {\n  api: {\n    bodyParser: false\n  }\n};\nexport default withCookies(connectDb(verify(apolloServer.createHandler({\n  path: \"/api/graphql\"\n}))));","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/pages/api/graphql/index.js"],"names":["ApolloServer","PubSub","require","typeDefs","resolvers","connectDb","withCookies","verify","pubsub","context","ctx","cookie","res","authData","req","apolloServer","config","api","bodyParser","createHandler","path"],"mappings":"AAAA,SAASA,YAAT,QAA4B,qBAA5B;AACA,SAAQC,MAAR,QAAqB,eAArB;;AACAC,OAAO,CAAC,eAAD,CAAP;;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,WAAP,MAAwB,kCAAxB;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AAEA,MAAMC,MAAM,GAAG,IAAIP,MAAJ,EAAf;;AAEA,MAAMQ,OAAO,GAAIC,GAAD,IAAS;AACvB,SAAO;AACLC,IAAAA,MAAM,EAAED,GAAG,CAACE,GAAJ,CAAQD,MADX;AAELE,IAAAA,QAAQ,EAAEH,GAAG,CAACI,GAAJ,CAAQD,QAFb;AAGLL,IAAAA,MAAM,EAAEA;AAHH,GAAP;AAKD,CAND;;AAQA,MAAMO,YAAY,GAAG,IAAIf,YAAJ,CAAiB;AACpCG,EAAAA,QADoC;AAEpCC,EAAAA,SAFoC;AAGpCK,EAAAA;AAHoC,CAAjB,CAArB;AAMA,OAAO,MAAMO,MAAM,GAAG;AACpBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE;AADT;AADe,CAAf;AAMP,eAAeZ,WAAW,CACxBD,SAAS,CAACE,MAAM,CAACQ,YAAY,CAACI,aAAb,CAA2B;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAA3B,CAAD,CAAP,CADe,CAA1B","sourcesContent":["import { ApolloServer} from \"apollo-server-micro\";\nimport {PubSub} from \"apollo-server\"\nrequire(\"dotenv/config\");\nimport { typeDefs } from \"./typeDefs\";\nimport { resolvers } from \"./resolvers\";\nimport connectDb from \"../middlewares/dbMiddleware.js\";\nimport withCookies from \"../middlewares/cookiesMiddleware\";\nimport verify from \"../verification/verifyTokenGraphql\";\n\nconst pubsub = new PubSub();\n\nconst context = (ctx) => {\n  return {\n    cookie: ctx.res.cookie,\n    authData: ctx.req.authData,\n    pubsub: pubsub,\n  };\n};\n\nconst apolloServer = new ApolloServer({\n  typeDefs,\n  resolvers,\n  context,\n});\n\nexport const config = {\n  api: {\n    bodyParser: false,\n  },\n};\n\nexport default withCookies(\n  connectDb(verify(apolloServer.createHandler({ path: \"/api/graphql\" })))\n);\n"]},"metadata":{},"sourceType":"module"}