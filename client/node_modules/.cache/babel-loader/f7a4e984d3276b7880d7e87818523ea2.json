{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Login/Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Page from \"../../components/Page/Page\";\nimport styles from \"../../components/Page/Page.module.css\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setIsLoggedIn, setUser } from \"../../redux/actions\";\nimport axios from \"axios\";\n\nconst Login = props => {\n  const {\n    email\n  } = useParams();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isLoggedInGlobal = useSelector(state => state.login.isLoggedIn);\n  const userGlobal = useSelector(state => state.login.user);\n  const socket = useSelector(state => state.network.socket);\n  useEffect(() => {\n    if (isLoggedInGlobal && formData.password === \"\") {\n      if (email) {\n        subscribeNewsletter().then(() => {\n          if (userGlobal && !userGlobal.isSubscribed) {\n            dispatch(setUser({ ...userGlobal,\n              isSubscribed: true\n            }));\n          }\n        });\n      } else {\n        alert(\"You are already logged in\");\n      }\n\n      history.push(\"/\");\n    }\n  }, [isLoggedInGlobal]);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n\n  const subscribeNewsletter = async () => {\n    const toPost = {\n      isSubscribed: true\n    };\n    const options = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    await axios.post(\"/auth/subscribe\", JSON.stringify(toPost), options).then(res => {\n      alert(\"Subscribed to newsletter\");\n    }).catch(err => {\n      if (err.response.status === 401 || err.response.status === 400) {\n        alert(err.response.data.error);\n      } else if (err.response.status !== 200) {\n        throw Error(err);\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (email) {\n      setFormData({ ...formData,\n        email: email\n      });\n    }\n  }, [email]);\n\n  const onEmailChange = e => {\n    setFormData({ ...formData,\n      email: e.target.value\n    });\n  };\n\n  const onPasswordChange = e => {\n    setFormData({ ...formData,\n      password: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    loginUser();\n  };\n\n  const loginUser = () => {\n    const options = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    axios.post(\"/auth/login\", JSON.stringify(formData), options).then(res => {\n      alert(\"Login Successful\");\n      isLoggedIn().then(() => {\n        if (email && userGlobal && !userGlobal.isSubscribed) {\n          subscribeNewsletter().then(() => {\n            if (userGlobal && !userGlobal.isSubscribed) {\n              dispatch(setUser({ ...userGlobal,\n                isSubscribed: true\n              }));\n            }\n          });\n        }\n\n        history.push(\"/\");\n      });\n    }).catch(err => {\n      if (err.response.status === 401 || err.response.status === 400) {\n        alert(err.response.data.error);\n      } else if (err.response.status !== 200) {\n        throw Error(err);\n      }\n    });\n  };\n\n  const isLoggedIn = async () => {\n    await axios.get(\"/auth/isloggedin\").then(response => {\n      if (response.status !== 200) {\n        dispatch(setIsLoggedIn(false));\n      } else {\n        dispatch(setIsLoggedIn(true));\n        dispatch(setUser(response.data.user));\n        socket && socket.emit(\"join\", {\n          _id: response.data.user._id\n        });\n        dispatch(fetchBlogArticles());\n      }\n    });\n  };\n\n  const contents = /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles[\"main-pane-item\"]} ${styles[\"main-pane-item-centered\"]}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles[\"register-login-form\"]}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, \"LOGIN\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles[\"register-login-form-padded\"]}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: styles[\"headline-form\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"text\",\n    value: formData.email,\n    onChange: onEmailChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"Password: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"password\",\n    value: formData.password,\n    onChange: onPasswordChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Login\",\n    className: styles[\"submit-button\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"register-login-form-text\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/forgotpassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, \"Forgot your password or locked out?\")), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, \"Don't have an account?\"))))));\n  return /*#__PURE__*/React.createElement(Page, {\n    sidebarFixTopOffset: 0,\n    mainPane: contents,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 10\n    }\n  });\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Login/Login.js"],"names":["React","useState","useEffect","Page","styles","Link","useHistory","useParams","useDispatch","useSelector","setIsLoggedIn","setUser","axios","Login","props","email","history","dispatch","isLoggedInGlobal","state","login","isLoggedIn","userGlobal","user","socket","network","formData","password","subscribeNewsletter","then","isSubscribed","alert","push","setFormData","toPost","options","headers","post","JSON","stringify","res","catch","err","response","status","data","error","Error","onEmailChange","e","target","value","onPasswordChange","handleSubmit","preventDefault","loginUser","get","emit","_id","fetchBlogArticles","contents"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Page from \"../../components/Page/Page\";\nimport styles from \"../../components/Page/Page.module.css\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setIsLoggedIn, setUser } from \"../../redux/actions\";\nimport axios from \"axios\";\n\nconst Login = (props) => {\n  const { email } = useParams();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isLoggedInGlobal = useSelector((state) => state.login.isLoggedIn);\n  const userGlobal = useSelector((state) => state.login.user);\n  const socket = useSelector((state) => state.network.socket);\n  useEffect(() => {\n    if (isLoggedInGlobal && formData.password === \"\") {\n      if (email) {\n        subscribeNewsletter().then(() => {\n          if (userGlobal && !userGlobal.isSubscribed) {\n            dispatch(setUser({ ...userGlobal, isSubscribed: true }));\n          }\n        });\n      } else {\n        alert(\"You are already logged in\");\n      }\n      history.push(\"/\");\n    }\n  }, [isLoggedInGlobal]);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const subscribeNewsletter = async () => {\n    const toPost = { isSubscribed: true };\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n\n    await axios\n      .post(\"/auth/subscribe\", JSON.stringify(toPost), options)\n      .then((res) => {\n        alert(\"Subscribed to newsletter\");\n      })\n      .catch((err) => {\n        if (err.response.status === 401 || err.response.status === 400) {\n          alert(err.response.data.error);\n        } else if (err.response.status !== 200) {\n          throw Error(err);\n        }\n      });\n  };\n\n  useEffect(() => {\n    if (email) {\n      setFormData({ ...formData, email: email });\n    }\n  }, [email]);\n\n  const onEmailChange = (e) => {\n    setFormData({ ...formData, email: e.target.value });\n  };\n\n  const onPasswordChange = (e) => {\n    setFormData({ ...formData, password: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    loginUser();\n  };\n\n  const loginUser = () => {\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n\n    axios\n      .post(\"/auth/login\", JSON.stringify(formData), options)\n      .then((res) => {\n        alert(\"Login Successful\");\n\n        isLoggedIn().then(() => {\n          if (email && userGlobal && !userGlobal.isSubscribed) {\n            subscribeNewsletter().then(() => {\n              if (userGlobal && !userGlobal.isSubscribed) {\n                dispatch(setUser({ ...userGlobal, isSubscribed: true }));\n              }\n            });\n          }\n          history.push(\"/\");\n        });\n      })\n      .catch((err) => {\n        if (err.response.status === 401 || err.response.status === 400) {\n          alert(err.response.data.error);\n        } else if (err.response.status !== 200) {\n          throw Error(err);\n        }\n      });\n  };\n\n  const isLoggedIn = async () => {\n    await axios.get(\"/auth/isloggedin\").then((response) => {\n      if (response.status !== 200) {\n        dispatch(setIsLoggedIn(false));\n      } else {\n        dispatch(setIsLoggedIn(true));\n        dispatch(setUser(response.data.user));\n        socket && socket.emit(\"join\", { _id: response.data.user._id });\n        dispatch(fetchBlogArticles());\n      }\n    });\n  };\n  const contents = (\n    <div\n      className={`${styles[\"main-pane-item\"]} ${styles[\"main-pane-item-centered\"]}`}\n    >\n      <div className={`${styles[\"register-login-form\"]}`}>\n        <h2>LOGIN</h2>\n        <div className={`${styles[\"register-login-form-padded\"]}`}>\n          <form onSubmit={handleSubmit} className={styles[\"headline-form\"]}>\n            <div className={styles[\"horizontal\"]}>\n              <label>Email: </label>\n              <input\n                className={styles[\"headline-form-input\"]}\n                type=\"text\"\n                value={formData.email}\n                onChange={onEmailChange}\n              />\n            </div>\n            <div className={styles[\"horizontal\"]}>\n              <label>Password: </label>\n              <input\n                className={styles[\"headline-form-input\"]}\n                type=\"password\"\n                value={formData.password}\n                onChange={onPasswordChange}\n              />\n            </div>\n            <input\n              type=\"submit\"\n              value=\"Login\"\n              className={styles[\"submit-button\"]}\n            />\n          </form>\n          <div className={styles[\"register-login-form-text\"]}>\n            <label>\n              <Link to={\"/forgotpassword\"}>\n                Forgot your password or locked out?\n              </Link>\n            </label>\n            <label>\n              <Link to={\"/register\"}>Don't have an account?</Link>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return <Page sidebarFixTopOffset={0} mainPane={contents} />;\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}