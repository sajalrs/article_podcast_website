{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/ArticlePage.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport SmallCard from \"../../components/Cards/SmallCard/SmallCard.js\";\nimport MediumCard from \"../../components/Cards/MediumCard/MediumCard.js\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./ArticlePage.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Value, Editor } from \"slate\";\nimport Html from \"slate-html-serializer\";\n\nconst ArticlePage = props => {\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const headerBoxRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixSidePanel = e => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixSidePanel);\n    return () => {\n      window.removeEventListener(\"scroll\", fixSidePanel);\n    };\n  }, [sidePanelFixed]);\n  const [article, setArticle] = useState({\n    title: \"\",\n    author: \"\",\n    date: \"\",\n    images: [],\n    content: `<p></p>`\n  });\n  const largeCardRef = useRef();\n  useEffect(() => {\n    const BLOCK_TAGS = {\n      p: \"paragraph\",\n      blockquote: \"block-quote\",\n      ul: `bulleted-list`,\n      h1: `heading-one`,\n      h2: `heading-two`,\n      li: `list-item`,\n      ol: `numbered-list`,\n      img: `image`\n    }; // Add a dictionary of mark tags.\n\n    const MARK_TAGS = {\n      em: \"italic\",\n      strong: \"bold\",\n      u: \"underlined\",\n      code: `code`\n    };\n    const rules = [{\n      deserialize(el, next) {\n        const type = BLOCK_TAGS[el.tagName.toLowerCase()];\n\n        if (type) {\n          return {\n            object: \"block\",\n            type: type,\n            data: {\n              className: el.getAttribute(\"class\")\n            },\n            nodes: next(el.childNodes)\n          };\n        }\n      },\n\n      serialize(obj, children) {\n        if (obj.object == \"block\") {\n          switch (obj.type) {\n            case \"paragraph\":\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: styles[\"main-pane-item\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"p\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 21\n                }\n              }, children));\n\n            case \"block-quote\":\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: styles[\"main-pane-item\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"blockquote\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 21\n                }\n              }, children));\n\n            case \"bulleted-list\":\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: styles[\"main-pane-item\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"ul\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 21\n                }\n              }, children));\n\n            case \"heading-one\":\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: styles[\"main-pane-item\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"h1\", {\n                className: styles[\"heading\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 21\n                }\n              }, children));\n\n            case \"heading-two\":\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: styles[\"main-pane-item\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"h2\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 21\n                }\n              }, children));\n\n            case \"list-item\":\n              return /*#__PURE__*/React.createElement(\"li\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case \"numbered-list\":\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: styles[\"main-pane-item\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"ol\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 21\n                }\n              }, children));\n\n            case \"image\":\n              {\n                const src = obj.data[\"src\"];\n                return /*#__PURE__*/React.createElement(\"div\", {\n                  className: styles[\"main-pane-item\"],\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 19\n                  }\n                }, /*#__PURE__*/React.createElement(\"figure\", {\n                  className: styles[\"image-container\"],\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 21\n                  }\n                }, /*#__PURE__*/React.createElement(\"img\", {\n                  src: src,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 23\n                  }\n                })));\n              }\n\n            case \"figure\":\n              {\n                const src = obj.data[\"src\"];\n                return /*#__PURE__*/React.createElement(\"div\", {\n                  className: styles[\"main-pane-item\"],\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 19\n                  }\n                }, /*#__PURE__*/React.createElement(\"figure\", {\n                  className: styles[\"image-container\"],\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 21\n                  }\n                }, /*#__PURE__*/React.createElement(\"img\", {\n                  src: src,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 23\n                  }\n                }), /*#__PURE__*/React.createElement(\"figcaption\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 23\n                  }\n                }, /*#__PURE__*/React.createElement(\"strong\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 25\n                  }\n                }, children))));\n              }\n          }\n        }\n      }\n\n    }, // Add a new rule that handles marks...\n    {\n      deserialize(el, next) {\n        const type = MARK_TAGS[el.tagName.toLowerCase()];\n\n        if (type) {\n          return {\n            object: \"mark\",\n            type: type,\n            nodes: next(el.childNodes)\n          };\n        }\n      },\n\n      serialize(obj, children) {\n        if (obj.object == \"mark\") {\n          switch (obj.type) {\n            case \"bold\":\n              return /*#__PURE__*/React.createElement(\"strong\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case \"italic\":\n              return /*#__PURE__*/React.createElement(\"em\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case \"code\":\n              return /*#__PURE__*/React.createElement(\"code\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case \"underlined\":\n              return /*#__PURE__*/React.createElement(\"u\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 24\n                }\n              }, children);\n          }\n        }\n      }\n\n    }];\n    const html = new Html({\n      rules\n    });\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles/?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    getArticle().then(res => {\n      setArticle({\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n        content: res.content ? html.serialize(res.content) : `<p></p>`\n      });\n    });\n  }, []);\n\n  const getLinkFunction = linkType => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n\n      case Card.LinkType[\"article-internal\"]:\n        return articleLink => {\n          history.push(articleLink);\n        };\n\n      default:\n        break;\n    }\n  };\n\n  const renderOnceSidePanel = /*#__PURE__*/React.createElement(SidePanel, {\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    youtubeVideos: props.youtubeVideos,\n    getImageLink: props.getImageLink,\n    playVideo: props.playVideo,\n    getHyperLink: props.getHyperLink,\n    sidePanelFixed: sidePanelFixed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"overarching\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"primary-color-background\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"ArticlePage\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    ref: headerBoxRef,\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    navbarClicked: props.navbarClicked,\n    setNavbarClicked: props.setNavbarClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"headline\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LargeCard, {\n    title: article.title,\n    author: article.author,\n    date: article.date,\n    image: article.image,\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"content-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"main-pane\"],\n    dangerouslySetInnerHTML: {\n      __html: article.content\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"side-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }), sidePanelFixed ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: props.topOffset,\n      right: \"0px\",\n      zIndex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: props.topOffset\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"footer-container\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Footer, {\n    selectedTrack: props.selectedTrack,\n    setSelectedTrack: props.setSelectedTrack,\n    player: props.player,\n    setPlayer: props.setPlayer,\n    forwardPodcasts: props.forwardPodcasts,\n    rewindPodcasts: props.rewindPodcasts,\n    currentTime: props.currentTime,\n    setCurrentTime: props.setCurrentTime,\n    audioRef: props.audioRef,\n    audioPlayerFixed: props.audioPlayerFixed,\n    setAudioPlayerFixed: props.setAudioPlayerFixed,\n    sidePanelFixed: sidePanelFixed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default ArticlePage;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/ArticlePage.js"],"names":["React","useState","useEffect","useRef","SmallCard","MediumCard","LargeCard","SidePanel","Card","styles","Header","Footer","useHistory","useParams","Value","Editor","Html","ArticlePage","props","id","history","sidePanelFixed","setSidePanelFix","headerBoxRef","window","scrollTo","fixSidePanel","e","scrollY","current","clientHeight","addEventListener","removeEventListener","article","setArticle","title","author","date","images","content","largeCardRef","BLOCK_TAGS","p","blockquote","ul","h1","h2","li","ol","img","MARK_TAGS","em","strong","u","code","rules","deserialize","el","next","type","tagName","toLowerCase","object","data","className","getAttribute","nodes","childNodes","serialize","obj","children","src","html","getArticle","response","fetch","body","json","status","Error","message","then","res","image","getLinkFunction","linkType","LinkType","playVideo","articleLink","push","renderOnceSidePanel","sideBarClicked","setSideBarClicked","youtubeVideos","getImageLink","getHyperLink","navbarClicked","setNavbarClicked","__html","position","top","topOffset","right","zIndex","marginTop","selectedTrack","setSelectedTrack","player","setPlayer","forwardPodcasts","rewindPodcasts","currentTime","setCurrentTime","audioRef","audioPlayerFixed","setAudioPlayerFixed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport SmallCard from \"../../components/Cards/SmallCard/SmallCard.js\";\nimport MediumCard from \"../../components/Cards/MediumCard/MediumCard.js\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./ArticlePage.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Value, Editor } from \"slate\";\nimport Html from \"slate-html-serializer\";\nconst ArticlePage = (props) => {\n  const { id } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const headerBoxRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixSidePanel = (e) => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixSidePanel);\n    return () => {\n      window.removeEventListener(\"scroll\", fixSidePanel);\n    };\n  }, [sidePanelFixed]);\n\n  const [article, setArticle] = useState({\n    title: \"\",\n    author: \"\",\n    date: \"\",\n    images: [],\n    content: `<p></p>`,\n  });\n\n  const largeCardRef = useRef();\n  useEffect(() => {\n    const BLOCK_TAGS = {\n      p: \"paragraph\",\n      blockquote: \"block-quote\",\n      ul: `bulleted-list`,\n      h1: `heading-one`,\n      h2: `heading-two`,\n      li: `list-item`,\n      ol: `numbered-list`,\n      img: `image`,\n    };\n\n    // Add a dictionary of mark tags.\n    const MARK_TAGS = {\n      em: \"italic\",\n      strong: \"bold\",\n      u: \"underlined\",\n      code: `code`,\n    };\n\n    const rules = [\n      {\n        deserialize(el, next) {\n          const type = BLOCK_TAGS[el.tagName.toLowerCase()];\n          if (type) {\n            return {\n              object: \"block\",\n              type: type,\n              data: {\n                className: el.getAttribute(\"class\"),\n              },\n              nodes: next(el.childNodes),\n            };\n          }\n        },\n        serialize(obj, children) {\n          if (obj.object == \"block\") {\n            switch (obj.type) {\n              case \"paragraph\":\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <p>{children}</p>\n                  </div>\n                );\n              case \"block-quote\":\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <blockquote>{children}</blockquote>\n                  </div>\n                );\n              case \"bulleted-list\":\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <ul>{children}</ul>\n                  </div>\n                );\n              case \"heading-one\":\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <h1 className={styles[\"heading\"]}>{children}</h1>\n                  </div>\n                );\n              case \"heading-two\":\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <h2>{children}</h2>\n                  </div>\n                );\n              case \"list-item\":\n                return <li>{children}</li>;\n              case \"numbered-list\":\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <ol>{children}</ol>\n                  </div>\n                );\n              case \"image\": {\n                const src = obj.data[\"src\"];\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <figure className={styles[\"image-container\"]}>\n                      <img src={src} />\n                    </figure>\n                  </div>\n                );\n              }\n              case \"figure\": {\n                const src = obj.data[\"src\"];\n                return (\n                  <div className={styles[\"main-pane-item\"]}>\n                    <figure className={styles[\"image-container\"]}>\n                      <img src={src} />\n                      <figcaption>\n                        <strong>{children}</strong>\n                      </figcaption>\n                    </figure>\n                  </div>\n                );\n              }\n            }\n          }\n        },\n      },\n      // Add a new rule that handles marks...\n      {\n        deserialize(el, next) {\n          const type = MARK_TAGS[el.tagName.toLowerCase()];\n          if (type) {\n            return {\n              object: \"mark\",\n              type: type,\n              nodes: next(el.childNodes),\n            };\n          }\n        },\n        serialize(obj, children) {\n          if (obj.object == \"mark\") {\n            switch (obj.type) {\n              case \"bold\":\n                return <strong>{children}</strong>;\n              case \"italic\":\n                return <em>{children}</em>;\n              case \"code\":\n                return <code>{children}</code>;\n              case \"underlined\":\n                return <u>{children}</u>;\n            }\n          }\n        },\n      },\n    ];\n    const html = new Html({ rules });\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles/?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n\n      return body;\n    };\n\n    getArticle().then((res) => {\n      setArticle({\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n        content: res.content ? html.serialize(res.content) : `<p></p>`,\n      });\n    });\n  }, []);\n\n  const getLinkFunction = (linkType) => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n      case Card.LinkType[\"article-internal\"]:\n        return (articleLink) => {\n          history.push(articleLink);\n        };\n      default:\n        break;\n    }\n  };\n  const renderOnceSidePanel = (\n    <SidePanel\n      sideBarClicked={props.sideBarClicked}\n      setSideBarClicked={props.setSideBarClicked}\n      youtubeVideos={props.youtubeVideos}\n      getImageLink={props.getImageLink}\n      playVideo={props.playVideo}\n      getHyperLink={props.getHyperLink}\n      sidePanelFixed={sidePanelFixed}\n    />\n  );\n\n  return (\n    <div className={styles[\"overarching\"]}>\n      <div className={styles[\"primary-color-background\"]}></div>\n      <div className={styles[\"ArticlePage\"]}>\n        <Header\n          ref={headerBoxRef}\n          sideBarClicked={props.sideBarClicked}\n          setSideBarClicked={props.setSideBarClicked}\n          navbarClicked={props.navbarClicked}\n          setNavbarClicked={props.setNavbarClicked}\n        />\n        <div className={styles[\"headline\"]}>\n          <LargeCard\n            title={article.title}\n            author={article.author}\n            date={article.date}\n            image={article.image}\n            onClick={() => {}}\n          />\n        </div>\n        <div className={styles[\"content-pane\"]}>\n          <div\n            className={styles[\"main-pane\"]}\n            dangerouslySetInnerHTML={{ __html: article.content }}\n          >\n            {/* {article.sections.map((item) => {\n              return (\n                <div>\n                  {item.hasOwnProperty(\"subheading\") ? (\n                    <h2 className={styles[\"subheading\"]}>{item.subheading}</h2>\n                  ) : item.hasOwnProperty(\"paragraph\") ? (\n                    <p>{item.paragraph.text}</p>\n                  ) : item.hasOwnProperty(\"image\") ? (\n                    <div className={styles[\"main-pane-item\"]}>\n                      <figure className={styles[\"image-container\"]}>\n                        <img src={item.image.src} alt={item.image.caption} />\n                        <figcaption>\n                          {item.image.caption? (<i><strong>Picture:</strong> {item.image.caption}</i>) : null}\n                        </figcaption>\n                      </figure>\n                    </div>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              );\n            })} */}\n          </div>\n\n          <div className={styles[\"side-pane\"]}></div>\n          {sidePanelFixed ? (\n            <div\n              style={{ position: \"fixed\", top: props.topOffset, right: \"0px\", zIndex: 1 }}\n            >\n              {/* <div style={{ position: \"fixed\", top: \"103.5px\", right: \"0px\"}}> */}\n              {renderOnceSidePanel}\n            </div>\n          ) : (\n            <div style={{ marginTop: props.topOffset }}>\n              {renderOnceSidePanel}\n            </div>\n          )}\n        </div>\n\n        <div className={styles[\"footer-container\"]}>\n          <Footer\n            selectedTrack={props.selectedTrack}\n            setSelectedTrack={props.setSelectedTrack}\n            player={props.player}\n            setPlayer={props.setPlayer}\n            forwardPodcasts={props.forwardPodcasts}\n            rewindPodcasts={props.rewindPodcasts}\n            currentTime={props.currentTime}\n            setCurrentTime={props.setCurrentTime}\n            audioRef={props.audioRef}\n            audioPlayerFixed={props.audioPlayerFixed}\n            setAudioPlayerFixed={props.setAudioPlayerFixed}\n            sidePanelFixed={sidePanelFixed}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArticlePage;\n"]},"metadata":{},"sourceType":"module"}