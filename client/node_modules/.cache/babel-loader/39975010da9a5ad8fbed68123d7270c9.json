{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/ArticlePage.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport SmallCard from \"../../components/Cards/SmallCard/SmallCard.js\";\nimport MediumCard from \"../../components/Cards/MediumCard/MediumCard.js\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./ArticlePage.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Value } from \"slate\";\nimport Html from 'slate-html-serializer';\n\nconst ArticlePage = props => {\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const headerBoxRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixNavbar = e => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixNavbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixNavbar);\n    };\n  }, [sidePanelFixed]);\n  const [article, setArticle] = useState({\n    title: \"\",\n    author: \"\",\n    date: \"\",\n    images: [],\n    content: `<p></p>`\n  });\n  const largeCardRef = useRef();\n  useEffect(() => {\n    const BLOCK_TAGS = {\n      p: 'paragraph',\n      blockquote: 'block-quote',\n      ul: `bulleted-list`,\n      h1: `heading-one`,\n      h2: `heading-two`,\n      li: `list-item`,\n      ol: `numbered-list`,\n      img: `image`\n    }; // Add a dictionary of mark tags.\n\n    const MARK_TAGS = {\n      em: 'italic',\n      strong: 'bold',\n      u: 'underline',\n      code: `code`\n    };\n    const rules = [{\n      deserialize(el, next) {\n        const type = BLOCK_TAGS[el.tagName.toLowerCase()];\n\n        if (type) {\n          return {\n            object: 'block',\n            type: type,\n            data: {\n              className: el.getAttribute('class')\n            },\n            nodes: next(el.childNodes)\n          };\n        }\n      },\n\n      serialize(obj, children) {\n        if (obj.object == 'block') {\n          switch (obj.type) {\n            case 'paragraph':\n              return /*#__PURE__*/React.createElement(\"p\", {\n                className: obj.data.get('className'),\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case \"block-quote\":\n              return /*#__PURE__*/React.createElement(\"blockquote\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 26\n                }\n              }, children);\n\n            case \"bulleted-list\":\n              return /*#__PURE__*/React.createElement(\"ul\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 26\n                }\n              }, children);\n\n            case \"heading-one\":\n              return /*#__PURE__*/React.createElement(\"h1\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 26\n                }\n              }, children);\n\n            case \"heading-two\":\n              return /*#__PURE__*/React.createElement(\"h2\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 26\n                }\n              }, children);\n\n            case \"list-item\":\n              return /*#__PURE__*/React.createElement(\"li\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 26\n                }\n              }, children);\n\n            case \"numbered-list\":\n              return /*#__PURE__*/React.createElement(\"ol\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 26\n                }\n              }, children);\n\n            case \"image\":\n              {\n                const src = obj.data.get('src');\n                return /*#__PURE__*/React.createElement(\"img\", {\n                  src: src,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 21\n                  }\n                });\n              }\n          }\n        }\n      }\n\n    }, // Add a new rule that handles marks...\n    {\n      deserialize(el, next) {\n        const type = MARK_TAGS[el.tagName.toLowerCase()];\n\n        if (type) {\n          return {\n            object: 'mark',\n            type: type,\n            nodes: next(el.childNodes)\n          };\n        }\n      },\n\n      serialize(obj, children) {\n        if (obj.object == 'mark') {\n          switch (obj.type) {\n            case 'bold':\n              return /*#__PURE__*/React.createElement(\"strong\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case 'italic':\n              return /*#__PURE__*/React.createElement(\"em\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case 'code':\n              return /*#__PURE__*/React.createElement(\"code\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 24\n                }\n              }, children);\n\n            case 'underline':\n              return /*#__PURE__*/React.createElement(\"u\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 24\n                }\n              }, children);\n          }\n        }\n      }\n\n    }];\n    const html = new Html({\n      rules\n    });\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles/?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    getArticle().then(res => {\n      setArticle({\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n        content: html.serialize(res.content)\n      });\n      console.log(article.content);\n    });\n  }, []);\n\n  const getLinkFunction = linkType => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n\n      case Card.LinkType[\"article-internal\"]:\n        return articleLink => {\n          history.push(articleLink);\n        };\n\n      default:\n        break;\n    }\n  };\n\n  const renderOnceSidePanel = /*#__PURE__*/React.createElement(SidePanel, {\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    youtubeIds: props.youtubeIds,\n    getImageLink: props.getImageLink,\n    playVideo: props.playVideo,\n    getHyperLink: props.getHyperLink,\n    sidePanelFixed: sidePanelFixed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"overarching\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"primary-color-background\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"ArticlePage\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    ref: headerBoxRef,\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    navbarClicked: props.navbarClicked,\n    setNavbarClicked: props.setNavbarClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"headline\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LargeCard, {\n    title: article.title,\n    author: article.author,\n    date: article.date,\n    image: article.image,\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"content-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"main-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"main-pane-item\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"side-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 11\n    }\n  }), sidePanelFixed ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: props.topOffset,\n      right: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: props.topOffset\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"footer-container\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default ArticlePage;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/ArticlePage.js"],"names":["React","useState","useEffect","useRef","SmallCard","MediumCard","LargeCard","SidePanel","Card","styles","Header","Footer","useHistory","useParams","Value","Html","ArticlePage","props","id","history","sidePanelFixed","setSidePanelFix","headerBoxRef","window","scrollTo","fixNavbar","e","scrollY","current","clientHeight","addEventListener","removeEventListener","article","setArticle","title","author","date","images","content","largeCardRef","BLOCK_TAGS","p","blockquote","ul","h1","h2","li","ol","img","MARK_TAGS","em","strong","u","code","rules","deserialize","el","next","type","tagName","toLowerCase","object","data","className","getAttribute","nodes","childNodes","serialize","obj","children","get","src","html","getArticle","response","fetch","body","json","status","Error","message","then","res","image","console","log","getLinkFunction","linkType","LinkType","playVideo","articleLink","push","renderOnceSidePanel","sideBarClicked","setSideBarClicked","youtubeIds","getImageLink","getHyperLink","navbarClicked","setNavbarClicked","position","top","topOffset","right","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport SmallCard from \"../../components/Cards/SmallCard/SmallCard.js\";\nimport MediumCard from \"../../components/Cards/MediumCard/MediumCard.js\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./ArticlePage.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport {Value } from \"slate\";\nimport Html from 'slate-html-serializer'\nconst ArticlePage = (props) => {\n  const { id } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const headerBoxRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixNavbar = (e) => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixNavbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixNavbar);\n    };\n  }, [sidePanelFixed]);\n\n  const [article, setArticle] = useState({\n    title: \"\",\n    author: \"\",\n    date: \"\",\n    images: [],\n    content: `<p></p>`\n  });\n\n  const largeCardRef = useRef();\n  useEffect(() => {\n    const BLOCK_TAGS = {\n      p: 'paragraph',\n      blockquote: 'block-quote',\n      ul: `bulleted-list`,\n      h1: `heading-one`,\n      h2: `heading-two`,\n      li: `list-item`,\n      ol: `numbered-list`,\n      img: `image`\n    }\n    \n    // Add a dictionary of mark tags.\n    const MARK_TAGS = {\n      em: 'italic',\n      strong: 'bold',\n      u: 'underline',\n      code: `code`\n    }\n    \n    const rules = [\n      {\n        deserialize(el, next) {\n          const type = BLOCK_TAGS[el.tagName.toLowerCase()]\n          if (type) {\n            return {\n              object: 'block',\n              type: type,\n              data: {\n                className: el.getAttribute('class'),\n              },\n              nodes: next(el.childNodes),\n            }\n          }\n        },\n        serialize(obj, children) {\n          if (obj.object == 'block') {\n            switch (obj.type) {\n              case 'paragraph':\n                return <p className={obj.data.get('className')}>{children}</p>\n                case \"block-quote\":\n                  return <blockquote>{children}</blockquote>;\n                case \"bulleted-list\":\n                  return <ul>{children}</ul>;\n                case \"heading-one\":\n                  return <h1>{children}</h1>;\n                case \"heading-two\":\n                  return <h2>{children}</h2>;\n                case \"list-item\":\n                  return <li>{children}</li>;\n                case \"numbered-list\":\n                  return <ol>{children}</ol>;\n                case \"image\": {\n                  const src = obj.data.get('src')\n                  return (\n                    <img\n                      src={src}\n                    />\n                  )\n                }\n            }\n          }\n        },\n      },\n      // Add a new rule that handles marks...\n      {\n        deserialize(el, next) {\n          const type = MARK_TAGS[el.tagName.toLowerCase()]\n          if (type) {\n            return {\n              object: 'mark',\n              type: type,\n              nodes: next(el.childNodes),\n            }\n          }\n        },\n        serialize(obj, children) {\n          if (obj.object == 'mark') {\n            switch (obj.type) {\n              case 'bold':\n                return <strong>{children}</strong>\n              case 'italic':\n                return <em>{children}</em>\n              case 'code':\n                return <code>{children}</code>\n              case 'underline':\n                return <u>{children}</u>\n            }\n          }\n        },\n      },\n    ]\n    const html = new Html({rules})\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles/?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n\n      return body;\n    };\n\n    getArticle().then((res) => {\n     \n      setArticle({\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n        content: html.serialize(res.content) \n      });\n      console.log(article.content);\n    }\n    \n    );\n  }, []);\n\n\n  \n\n  const getLinkFunction = (linkType) => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n      case Card.LinkType[\"article-internal\"]:\n        return (articleLink) => {\n          history.push(articleLink);\n        };\n      default:\n        break;\n    }\n  };\n  const renderOnceSidePanel = (\n    <SidePanel\n      sideBarClicked={props.sideBarClicked}\n      setSideBarClicked={props.setSideBarClicked}\n      youtubeIds={props.youtubeIds}\n      getImageLink={props.getImageLink}\n      playVideo={props.playVideo}\n      getHyperLink={props.getHyperLink}\n      sidePanelFixed={sidePanelFixed}\n    />\n  );\n\n\n  return (\n    <div className={styles[\"overarching\"]}>\n      <div className={styles[\"primary-color-background\"]}></div>\n      <div className={styles[\"ArticlePage\"]}>\n        <Header\n          ref={headerBoxRef}\n          sideBarClicked={props.sideBarClicked}\n          setSideBarClicked={props.setSideBarClicked}\n          navbarClicked={props.navbarClicked}\n          setNavbarClicked={props.setNavbarClicked}\n        />\n        <div className={styles[\"headline\"]}>\n          <LargeCard\n            title={article.title}\n            author={article.author}\n            date={article.date}\n            image={article.image}\n            onClick={() => {}}\n          />\n        </div>\n        <div className={styles[\"content-pane\"]}>\n          <div className={styles[\"main-pane\"]}>\n            <div className={styles[\"main-pane-item\"]}></div>\n\n            {/* {article.sections.map((item) => {\n              return (\n                <div>\n                  {item.hasOwnProperty(\"subheading\") ? (\n                    <h2 className={styles[\"subheading\"]}>{item.subheading}</h2>\n                  ) : item.hasOwnProperty(\"paragraph\") ? (\n                    <p>{item.paragraph.text}</p>\n                  ) : item.hasOwnProperty(\"image\") ? (\n                    <div className={styles[\"main-pane-item\"]}>\n                      <figure className={styles[\"image-container\"]}>\n                        <img src={item.image.src} alt={item.image.caption} />\n                        <figcaption>\n                          {item.image.caption? (<i><strong>Picture:</strong> {item.image.caption}</i>) : null}\n                        </figcaption>\n                      </figure>\n                    </div>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              );\n            })} */}\n\n\n          </div>\n\n          <div className={styles[\"side-pane\"]}></div>\n          {sidePanelFixed ? (\n            <div\n              style={{ position: \"fixed\", top: props.topOffset, right: \"0px\" }}\n            >\n              {/* <div style={{ position: \"fixed\", top: \"103.5px\", right: \"0px\"}}> */}\n              {renderOnceSidePanel}\n            </div>\n          ) : (\n            <div style={{ marginTop: props.topOffset }}>\n              {renderOnceSidePanel}\n            </div>\n          )}\n        </div>\n\n        <div className={styles[\"footer-container\"]}>\n          <Footer />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArticlePage;\n"]},"metadata":{},"sourceType":"module"}