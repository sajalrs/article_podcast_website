{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/TextEditor/TextEditor.js\";\nimport React, { useState, useRef } from \"react\";\nimport { Editor } from \"slate-react\";\nimport { Value } from \"slate\";\nimport styles from \"./TextEditor.module.css\";\nimport FormatToolbar from \"./FormatToolbar\";\nimport { isKeyHotkey } from \"is-hotkey\";\nconst initialValue = Value.fromJSON({\n  document: {\n    nodes: [{\n      object: \"block\",\n      type: \"paragraph\",\n      nodes: [{\n        object: \"text\",\n        leaves: [{\n          text: \"My first paragraph\"\n        }]\n      }]\n    }]\n  }\n});\n\nconst TextEditor = () => {\n  const [value, setValue] = useState(initialValue);\n  const ref = useRef();\n  const isBoldHotkey = isKeyHotkey(\"mod+b\");\n  const isItalicHotkey = isKeyHotkey(\"mod+i\");\n  const isUnderlinedHotkey = isKeyHotkey(\"mod+u\");\n  const isCodeHotkey = isKeyHotkey(\"mod+`\");\n\n  const hasMark = type => {\n    return value.activeMarks.some(node => node.type === type);\n  };\n\n  const renderMarkButton = (type, icon) => {\n    const isActive = hasMark(type);\n    return /*#__PURE__*/React.createElement(\"button\", {\n      active: isActive,\n      onPointerDown: evemt => onClickMark(event, type),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderBlockButton = (type, icon) => {\n    let isActive = this.hasBlock(type);\n\n    if ([\"numbered-list\", \"bulleted-list\"].includes(type)) {\n      const {\n        document,\n        blocks\n      } = value;\n\n      if (blocks.size > 0) {\n        const parent = document.getParent(blocks.first().key);\n        isActive = hasBlock(\"list-item\") && parent && parent.type === type;\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"button\", {\n      active: isActive,\n      onPointerDown: event => onClickBlock(event, type),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderBlock = (props, editor, next) => {\n    const {\n      attributes,\n      children,\n      node\n    } = props;\n\n    switch (node.type) {\n      case \"block-quote\":\n        return /*#__PURE__*/React.createElement(\"blockquote\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"bulleted-list\":\n        return /*#__PURE__*/React.createElement(\"ul\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"heading-one\":\n        return /*#__PURE__*/React.createElement(\"h1\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"heading-two\":\n        return /*#__PURE__*/React.createElement(\"h2\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"list-item\":\n        return /*#__PURE__*/React.createElement(\"li\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"numbered-list\":\n        return /*#__PURE__*/React.createElement(\"ol\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 16\n          }\n        }), children);\n\n      default:\n        return next();\n    }\n  };\n\n  const renderMark = (props, editor, next) => {\n    const {\n      children,\n      mark,\n      attributes\n    } = props;\n\n    switch (mark.type) {\n      case \"bold\":\n        return /*#__PURE__*/React.createElement(\"strong\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"code\":\n        return /*#__PURE__*/React.createElement(\"code\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"italic\":\n        return /*#__PURE__*/React.createElement(\"em\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"underlined\":\n        return /*#__PURE__*/React.createElement(\"u\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 16\n          }\n        }), children);\n\n      default:\n        return next();\n    }\n  };\n\n  const onKeyDown = (event, editor, next) => {\n    let mark;\n\n    if (isBoldHotkey(event)) {\n      mark = \"bold\";\n    } else if (isItalicHotkey(event)) {\n      mark = \"italic\";\n    } else if (isUnderlinedHotkey(event)) {\n      mark = \"underlined\";\n    } else if (isCodeHotkey(event)) {\n      mark = \"code\";\n    } else {\n      return next();\n    }\n\n    event.preventDefault();\n    editor.toggleMark(mark);\n  };\n\n  const onClickMark = (event, type) => {\n    event.preventDefault();\n    this.editor.toggleMark(type);\n  };\n\n  const onClickBlock = (event, type) => {\n    event.preventDefault();\n    const {\n      editor\n    } = this;\n    const {\n      value\n    } = editor;\n    const {\n      document\n    } = value; // Handle everything but list buttons.\n\n    if (type !== \"bulleted-list\" && type !== \"numbered-list\") {\n      const isActive = this.hasBlock(type);\n      const isList = this.hasBlock(\"list-item\");\n\n      if (isList) {\n        editor.setBlocks(isActive ? DEFAULT_NODE : type).unwrapBlock(\"bulleted-list\").unwrapBlock(\"numbered-list\");\n      } else {\n        editor.setBlocks(isActive ? DEFAULT_NODE : type);\n      }\n    } else {\n      // Handle the extra wrapping required for list buttons.\n      const isList = this.hasBlock(\"list-item\");\n      const isType = value.blocks.some(block => {\n        return !!document.getClosest(block.key, parent => parent.type === type);\n      });\n\n      if (isList && isType) {\n        editor.setBlocks(DEFAULT_NODE).unwrapBlock(\"bulleted-list\").unwrapBlock(\"numbered-list\");\n      } else if (isList) {\n        editor.unwrapBlock(type === \"bulleted-list\" ? \"numbered-list\" : \"bulleted-list\").wrapBlock(type);\n      } else {\n        editor.setBlocks(\"list-item\").wrapBlock(type);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"overarching\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FormatToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, renderMarkButton(\"bold\", \"fas fa-bold\"), renderMarkButton(\"underlined\", \"fas fa-bold\"), renderMarkButton(\"code\", \"fas fa-bold\"), renderBlockButton(\"heading-one\", \"fas fa-bold\"), renderBlockButton(\"heading-two\", \"fas fa-bold\"), renderBlockButton(\"block-quote\", \"fas fa-bold\"), renderBlockButton(\"numbered-list\", \"fas fa-bold\"), renderBlockButton(\"bulleted-list\", \"fas fa-bold\")), /*#__PURE__*/React.createElement(Editor, {\n    ref: ref,\n    className: styles[\"Editor\"],\n    value: value,\n    onChange: opts => setValue(opts.value),\n    onKeyDown: onKeyDown,\n    renderMark: renderMark,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }));\n}; // const BoldMark = (props) => <strong>{props.children}</strong>;\n// const ItalicMark = (props) => <em property=\"italic\">{props.children}</em>;\n\n\nexport default TextEditor; // const onKeyDown = (e, change, next) => {\n//     if (!e.ctrlKey) {\n//       return next();\n//     }\n//     e.preventDefault();\n//     switch (e.key) {\n//       case \"b\": {\n//         change.toggleMark(\"bold\");\n//         return true;\n//       }\n//       case \"i\": {\n//         change.toggleMark(\"italic\");\n//         return true;\n//       }\n//       case \"`\": {\n//         change.toggleMark(\"code\");\n//         return true;\n//       }\n//       case \"u\": {\n//         change.toggleMark(\"underline\");\n//         return true;\n//       }\n//     }\n//   };\n//   const renderMark = (props, editor, next) => {\n//     switch (props.mark.type) {\n//       case \"bold\":\n//         return <BoldMark {...props} />;\n//       case \"italic\":\n//         return <ItalicMark {...props} />;\n//       case \"code\":\n//         return <code {...props.attributes}>{props.children}</code>;\n//       case \"unordered-list\":\n//         return (\n//           <ul {...props.attributes}>\n//             <li>{props.children}</li>\n//           </ul>\n//         );\n//       case \"ordered-list\":\n//         return (\n//           <ol {...props.attributes}>\n//             <li>{props.children}</li>\n//           </ol>\n//         );\n//       case \"underline\":\n//         return <u {...props.attributes}>{props.children}</u>;\n//       default:\n//         return next();\n//     }\n//   };\n//   const onMarkClick = (e, type) => {\n//     e.preventDefault();\n//     console.log(type);\n//     ref.current.toggleMark(type);\n//   };","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/TextEditor/TextEditor.js"],"names":["React","useState","useRef","Editor","Value","styles","FormatToolbar","isKeyHotkey","initialValue","fromJSON","document","nodes","object","type","leaves","text","TextEditor","value","setValue","ref","isBoldHotkey","isItalicHotkey","isUnderlinedHotkey","isCodeHotkey","hasMark","activeMarks","some","node","renderMarkButton","icon","isActive","evemt","onClickMark","event","renderBlockButton","hasBlock","includes","blocks","size","parent","getParent","first","key","onClickBlock","renderBlock","props","editor","next","attributes","children","renderMark","mark","onKeyDown","preventDefault","toggleMark","isList","setBlocks","DEFAULT_NODE","unwrapBlock","isType","block","getClosest","wrapBlock","opts"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Editor } from \"slate-react\";\nimport { Value } from \"slate\";\nimport styles from \"./TextEditor.module.css\";\nimport FormatToolbar from \"./FormatToolbar\";\nimport { isKeyHotkey } from \"is-hotkey\";\n\nconst initialValue = Value.fromJSON({\n  document: {\n    nodes: [\n      {\n        object: \"block\",\n        type: \"paragraph\",\n        nodes: [\n          {\n            object: \"text\",\n            leaves: [\n              {\n                text: \"My first paragraph\",\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n});\n\nconst TextEditor = () => {\n  const [value, setValue] = useState(initialValue);\n  const ref = useRef();\n\n  const isBoldHotkey = isKeyHotkey(\"mod+b\");\n  const isItalicHotkey = isKeyHotkey(\"mod+i\");\n  const isUnderlinedHotkey = isKeyHotkey(\"mod+u\");\n  const isCodeHotkey = isKeyHotkey(\"mod+`\");\n\n  const hasMark = (type) => {\n    return value.activeMarks.some((node) => node.type === type);\n  };\n\n  const renderMarkButton = (type, icon) => {\n    const isActive = hasMark(type);\n    return (\n      <button\n        active={isActive}\n        onPointerDown={(evemt) => onClickMark(event, type)}\n      >\n        <i className={icon} />\n      </button>\n    );\n  };\n\n  const renderBlockButton = (type, icon) => {\n    let isActive = this.hasBlock(type);\n    if ([\"numbered-list\", \"bulleted-list\"].includes(type)) {\n      const { document, blocks } = value;\n\n      if (blocks.size > 0) {\n        const parent = document.getParent(blocks.first().key);\n        isActive = hasBlock(\"list-item\") && parent && parent.type === type;\n      }\n    }\n\n    return (\n      <button\n        active={isActive}\n        onPointerDown={(event) => onClickBlock(event, type)}\n      >\n        <i className={icon}></i>\n      </button>\n    );\n  };\n\n  const renderBlock = (props, editor, next) => {\n    const { attributes, children, node } = props;\n\n    switch (node.type) {\n      case \"block-quote\":\n        return <blockquote {...attributes}>{children}</blockquote>;\n      case \"bulleted-list\":\n        return <ul {...attributes}>{children}</ul>;\n      case \"heading-one\":\n        return <h1 {...attributes}>{children}</h1>;\n      case \"heading-two\":\n        return <h2 {...attributes}>{children}</h2>;\n      case \"list-item\":\n        return <li {...attributes}>{children}</li>;\n      case \"numbered-list\":\n        return <ol {...attributes}>{children}</ol>;\n      default:\n        return next();\n    }\n  };\n\n  const renderMark = (props, editor, next) => {\n    const { children, mark, attributes } = props;\n\n    switch (mark.type) {\n      case \"bold\":\n        return <strong {...attributes}>{children}</strong>;\n      case \"code\":\n        return <code {...attributes}>{children}</code>;\n      case \"italic\":\n        return <em {...attributes}>{children}</em>;\n      case \"underlined\":\n        return <u {...attributes}>{children}</u>;\n      default:\n        return next();\n    }\n  };\n\n  const onKeyDown = (event, editor, next) => {\n    let mark;\n\n    if (isBoldHotkey(event)) {\n      mark = \"bold\";\n    } else if (isItalicHotkey(event)) {\n      mark = \"italic\";\n    } else if (isUnderlinedHotkey(event)) {\n      mark = \"underlined\";\n    } else if (isCodeHotkey(event)) {\n      mark = \"code\";\n    } else {\n      return next();\n    }\n\n    event.preventDefault();\n    editor.toggleMark(mark);\n  };\n\n  const onClickMark = (event, type) => {\n    event.preventDefault();\n    this.editor.toggleMark(type);\n  };\n\n  const onClickBlock = (event, type) => {\n    event.preventDefault();\n\n    const { editor } = this;\n    const { value } = editor;\n    const { document } = value;\n\n    // Handle everything but list buttons.\n    if (type !== \"bulleted-list\" && type !== \"numbered-list\") {\n      const isActive = this.hasBlock(type);\n      const isList = this.hasBlock(\"list-item\");\n\n      if (isList) {\n        editor\n          .setBlocks(isActive ? DEFAULT_NODE : type)\n          .unwrapBlock(\"bulleted-list\")\n          .unwrapBlock(\"numbered-list\");\n      } else {\n        editor.setBlocks(isActive ? DEFAULT_NODE : type);\n      }\n    } else {\n      // Handle the extra wrapping required for list buttons.\n      const isList = this.hasBlock(\"list-item\");\n      const isType = value.blocks.some((block) => {\n        return !!document.getClosest(\n          block.key,\n          (parent) => parent.type === type\n        );\n      });\n\n      if (isList && isType) {\n        editor\n          .setBlocks(DEFAULT_NODE)\n          .unwrapBlock(\"bulleted-list\")\n          .unwrapBlock(\"numbered-list\");\n      } else if (isList) {\n        editor\n          .unwrapBlock(\n            type === \"bulleted-list\" ? \"numbered-list\" : \"bulleted-list\"\n          )\n          .wrapBlock(type);\n      } else {\n        editor.setBlocks(\"list-item\").wrapBlock(type);\n      }\n    }\n  };\n\n  return (\n    <div className={styles[\"overarching\"]}>\n      <FormatToolbar>\n        {renderMarkButton(\"bold\", \"fas fa-bold\")}\n        {renderMarkButton(\"underlined\", \"fas fa-bold\")}\n        {renderMarkButton(\"code\", \"fas fa-bold\")}\n        {renderBlockButton(\"heading-one\", \"fas fa-bold\")}\n        {renderBlockButton(\"heading-two\", \"fas fa-bold\")}\n        {renderBlockButton(\"block-quote\", \"fas fa-bold\")}\n        {renderBlockButton(\"numbered-list\", \"fas fa-bold\")}\n        {renderBlockButton(\"bulleted-list\", \"fas fa-bold\")}\n      </FormatToolbar>\n      <Editor\n        ref={ref}\n        className={styles[\"Editor\"]}\n        value={value}\n        onChange={(opts) => setValue(opts.value)}\n        onKeyDown={onKeyDown}\n        renderMark={renderMark}\n      />\n    </div>\n  );\n};\n\n// const BoldMark = (props) => <strong>{props.children}</strong>;\n\n// const ItalicMark = (props) => <em property=\"italic\">{props.children}</em>;\n\nexport default TextEditor;\n\n// const onKeyDown = (e, change, next) => {\n//     if (!e.ctrlKey) {\n//       return next();\n//     }\n//     e.preventDefault();\n\n//     switch (e.key) {\n//       case \"b\": {\n//         change.toggleMark(\"bold\");\n//         return true;\n//       }\n//       case \"i\": {\n//         change.toggleMark(\"italic\");\n//         return true;\n//       }\n//       case \"`\": {\n//         change.toggleMark(\"code\");\n//         return true;\n//       }\n//       case \"u\": {\n//         change.toggleMark(\"underline\");\n//         return true;\n//       }\n//     }\n//   };\n\n//   const renderMark = (props, editor, next) => {\n//     switch (props.mark.type) {\n//       case \"bold\":\n//         return <BoldMark {...props} />;\n//       case \"italic\":\n//         return <ItalicMark {...props} />;\n//       case \"code\":\n//         return <code {...props.attributes}>{props.children}</code>;\n//       case \"unordered-list\":\n//         return (\n//           <ul {...props.attributes}>\n//             <li>{props.children}</li>\n//           </ul>\n//         );\n//       case \"ordered-list\":\n//         return (\n//           <ol {...props.attributes}>\n//             <li>{props.children}</li>\n//           </ol>\n//         );\n//       case \"underline\":\n//         return <u {...props.attributes}>{props.children}</u>;\n//       default:\n//         return next();\n//     }\n//   };\n\n//   const onMarkClick = (e, type) => {\n//     e.preventDefault();\n//     console.log(type);\n//     ref.current.toggleMark(type);\n//   };\n"]},"metadata":{},"sourceType":"module"}