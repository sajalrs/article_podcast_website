{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/AudioPlayer.js\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport styles from \"./AudioPlayer.module.css\";\n\nconst AudioPlayer = props => {\n  // const [selectedTrack, setSelectedTrack] = useState({\n  //   title: \"False Nine Podcast #17 Champions League RO16 first leg review\",\n  //   by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n  //   link:\n  //     \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n  //   duration: 0,\n  //   date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n  //   currentTime: 0\n  // });\n  // const [player, setPlayer] = useState(\"paused\");\n  const audioRef = useRef();\n  const prevTrack = usePrevious(props.selectedTrack.items[props.selectedTrack.currentlyPlaying]);\n  const prevPlayer = usePrevious(props.player);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const seekBarRef = useRef();\n  useEffect(() => {\n    console.log(\"Ran\");\n\n    if (props.selectedTrack.items[props.selectedTrack.currentlyPlaying] !== prevTrack) {\n      let track;\n      track = props.selectedTrack ? props.selectedTrack.items[props.selectedTrack.currentlyPlaying].link : null;\n\n      if (track) {\n        audioRef.current.src = track;\n        audioRef.current.play();\n        props.setPlayer(\"playing\");\n      }\n    }\n  }, [props.selectedTrack.items[props.selectedTrack.currentlyPlaying]].title);\n  useEffect(() => {\n    console.log(\"Ran this\");\n\n    if (props.player !== prevPlayer) {\n      if (props.player === \"paused\") {\n        audioRef.current.pause();\n      } else if (props.player === \"playing\" && prevPlayer === \"paused\") {\n        audioRef.current.play();\n      }\n    }\n  }, [props.player]);\n  useEffect(() => {\n    audioRef.current.addEventListener(\"timeupdate\", e => {\n      setCurrentTime(e.target.currentTime);\n      setDuration(e.target.duration);\n    });\n    return () => {\n      audioRef.current.removeEventListener(\"timeupdate\", () => {});\n    };\n  }, []);\n\n  const handleSliderChange = e => {\n    const time = duration * (e.target.value / 100);\n    audioRef.current.currentTime = time;\n    setCurrentTime(time);\n  };\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n  function getTime(time) {\n    if (!isNaN(time)) {\n      return Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2);\n    }\n  }\n\n  const progressDuration = getTime(duration);\n  const progressTime = getTime(currentTime);\n  const progress = 100 / duration * currentTime;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"audio-player\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, props.selectedTrack.items[props.selectedTrack.currentlyPlaying].title, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"controls\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.rewindPodcasts(),\n    className: `${styles[\"backward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-backward\"]} fas fa-step-backward`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }), props.player === \"paused\" && /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.setPlayer(\"playing\"),\n    className: `${styles[\"play-button\"]} ${styles[\"far\"]} ${styles[\"fa-play-circle\"]} far fa-play-circle`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }), props.player === \"playing\" && /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.setPlayer(\"paused\"),\n    className: `${styles[\"pause-button\"]} ${styles[\"far\"]} ${styles[\"fa-pause-circle\"]} far fa-pause-circle`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.forwardPodcasts(),\n    className: `${styles[\"forward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-forward\"]} fas fa-step-forward`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, progressTime, \"    \", /*#__PURE__*/React.createElement(\"input\", {\n    ref: seekBarRef,\n    type: \"range\",\n    onChange: handleSliderChange,\n    value: progress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 31\n    }\n  }), \" \", progressDuration)), /*#__PURE__*/React.createElement(\"audio\", {\n    ref: audioRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default AudioPlayer;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/AudioPlayer.js"],"names":["React","useState","useRef","useEffect","styles","AudioPlayer","props","audioRef","prevTrack","usePrevious","selectedTrack","items","currentlyPlaying","prevPlayer","player","duration","setDuration","currentTime","setCurrentTime","seekBarRef","console","log","track","link","current","src","play","setPlayer","title","pause","addEventListener","e","target","removeEventListener","handleSliderChange","time","value","ref","getTime","isNaN","Math","floor","slice","progressDuration","progressTime","progress","rewindPodcasts","forwardPodcasts"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport styles from \"./AudioPlayer.module.css\";\nconst AudioPlayer = (props) => {\n  // const [selectedTrack, setSelectedTrack] = useState({\n  //   title: \"False Nine Podcast #17 Champions League RO16 first leg review\",\n  //   by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n  //   link:\n  //     \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n  //   duration: 0,\n  //   date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n  //   currentTime: 0\n  // });\n  // const [player, setPlayer] = useState(\"paused\");\n  const audioRef = useRef();\n  const prevTrack = usePrevious(\n    props.selectedTrack.items[props.selectedTrack.currentlyPlaying]\n  );\n  const prevPlayer = usePrevious(props.player);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const seekBarRef = useRef();\n  useEffect(() => {\n    console.log(\"Ran\");\n    if (\n      props.selectedTrack.items[props.selectedTrack.currentlyPlaying] !==\n      prevTrack\n    ) {\n      let track;\n      track = props.selectedTrack\n        ? props.selectedTrack.items[props.selectedTrack.currentlyPlaying].link\n        : null;\n      if (track) {\n        audioRef.current.src = track;\n        audioRef.current.play();\n        props.setPlayer(\"playing\");\n      }\n    }\n  }, [props.selectedTrack.items[props.selectedTrack.currentlyPlaying]].title);\n\n  useEffect(() => {\n    console.log(\"Ran this\");\n    if (props.player !== prevPlayer) {\n      if (props.player === \"paused\") {\n        audioRef.current.pause();\n      } else if (props.player === \"playing\" && prevPlayer === \"paused\") {\n        audioRef.current.play();\n      }\n    }\n  }, [props.player]);\n\n  useEffect(() => {\n    audioRef.current.addEventListener(\"timeupdate\", (e) => {\n      setCurrentTime(e.target.currentTime);\n      setDuration(e.target.duration);\n    });\n    return () => {\n      audioRef.current.removeEventListener(\"timeupdate\", () => {});\n    };\n  }, []);\n\n  const handleSliderChange = (e) => {\n    const time = duration * (e.target.value / 100);\n    audioRef.current.currentTime = time;\n    setCurrentTime(time);\n  };\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n  function getTime(time) {\n    if (!isNaN(time)) {\n      return (\n        Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2)\n      );\n    }\n  }\n  const progressDuration = getTime(duration);\n  const progressTime = getTime(currentTime);\n  const progress = (100 / duration) * currentTime;\n  return (\n    <div className={styles[\"audio-player\"]}>\n      <div>\n       \n    \n          {\n            props.selectedTrack.items[props.selectedTrack.currentlyPlaying]\n              .title\n          }\n        <div className={styles[\"controls\"]}>\n        <i\n          onClick={() => props.rewindPodcasts()}\n          className={`${styles[\"backward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-backward\"]} fas fa-step-backward`}\n        ></i>\n        {props.player === \"paused\" && (\n          <i\n            onClick={() => props.setPlayer(\"playing\")}\n            className={`${styles[\"play-button\"]} ${styles[\"far\"]} ${styles[\"fa-play-circle\"]} far fa-play-circle`}\n          ></i>\n        )}\n        {props.player === \"playing\" && (\n          <i\n            onClick={() => props.setPlayer(\"paused\")}\n            className={`${styles[\"pause-button\"]} ${styles[\"far\"]} ${styles[\"fa-pause-circle\"]} far fa-pause-circle`}\n          ></i>\n        )}\n          <i\n          onClick={() => props.forwardPodcasts()}\n          className={`${styles[\"forward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-forward\"]} fas fa-step-forward`}\n        ></i>\n        </div>\n          <div>\n            {progressTime}    <input\n              ref={seekBarRef}\n              type=\"range\"\n              onChange={handleSliderChange}\n              value={progress}\n            /> {progressDuration}\n         \n          </div>\n         \n        \n  \n     \n      </div>\n\n      <audio ref={audioRef} />\n      {/*https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a  */}\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n"]},"metadata":{},"sourceType":"module"}