{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/AudioPlayer.js\";\nimport React, { useState, useRef, useEffect } from \"react\";\n\nconst AudioPlayer = () => {\n  const [selectedTrack, setSelectedTrack] = useState({\n    title: \"False Nine Podcast #17 Champions League RO16 first leg review\",\n    by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n    link: \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n    duration: 0,\n    date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n    currentTime: 0,\n    player: \"paused\"\n  }); // const [player, setPlayer] = useState(\"paused\");\n\n  const audioRef = useRef();\n  const prevTrack = usePrevious(selectedTrack);\n  const prevPlayer = usePrevious(player); // const [duration, setDuration] = useState(0);\n\n  const seekBarRef = useRef();\n  useEffect(() => {\n    console.log(\"Ran\");\n\n    if (selectedTrack !== prevTrack) {\n      let track;\n      track = selectedTrack ? selectedTrack.link : null;\n\n      if (track) {\n        audioRef.current.src = track;\n        audioRef.current.play();\n        setSelectedTrack({ ...setSelectedTrack,\n          player: \"playing\"\n        });\n      }\n    }\n  }, [selectedTrack.title]);\n  useEffect(() => {\n    console.log(\"Ran this\");\n\n    if (selectedTrack.player !== prevPlayer) {\n      if (player === \"paused\") {\n        audioRef.current.pause();\n      } else if (player === \"playing\" && prevPlayer === \"paused\") {\n        audioRef.current.play();\n      }\n    }\n  }, [selectedTrack.player]);\n  useEffect(() => {\n    console.log(\"Runner\");\n    audioRef.current.addEventListener(\"timeupdate\", e => {\n      setSelectedTrack({ ...selectedTrack,\n        currentTime: e.target.currentTime,\n        duration: e.target.duration\n      });\n    });\n    return () => {\n      audioRef.current.removeEventListener(\"timeupdate\", () => {});\n    };\n  }, []); // useEffect(() => {\n  //   seekBarRef.current.addEventListener(\"change\", e => {\n  //       const time = duration * (e.target.value / 100);\n  //       audioRef.current.currentTime = time;\n  //       setCurrentTime(time);\n  //   })\n  //     return () => {\n  //       seekBarRef.current.removeEventListener(\"change\", () => {});\n  //     }\n  // }, [])\n\n  const handleSliderChange = e => {\n    const time = selectedTrack.duration * (e.target.value / 100);\n    audioRef.current.currentTime = time;\n    setSelectedTrack({ ...selectedTrack,\n      currentTime: time\n    });\n  };\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n  function getTime(time) {\n    if (!isNaN(time)) {\n      return Math.floor(time / 60) + ':' + ('0' + Math.floor(time % 60)).slice(-2);\n    }\n  }\n\n  const progressDuration = getTime(selectedTrack.duration);\n  const progressTime = getTime(selectedTrack.currentTime);\n  const progress = 100 / selectedTrack.duration * selectedTrack.currentTime;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, selectedTrack.player === \"paused\" && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setSelectedTrack({ ...selectedTrack,\n      player: \"playing\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Play\"), selectedTrack.player === \"playing\" && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setSelectedTrack({ ...selectedTrack,\n      player: \"paused\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Pause\"), selectedTrack.player === \"playing\" || selectedTrack.player === \"paused\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, progressTime, \" / \", progressDuration, /*#__PURE__*/React.createElement(\"input\", {\n    ref: seekBarRef,\n    type: \"range\",\n    onChange: handleSliderChange,\n    value: progress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  })) : \"\"), /*#__PURE__*/React.createElement(\"audio\", {\n    ref: audioRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default AudioPlayer;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/AudioPlayer.js"],"names":["React","useState","useRef","useEffect","AudioPlayer","selectedTrack","setSelectedTrack","title","by","link","duration","date","currentTime","player","audioRef","prevTrack","usePrevious","prevPlayer","seekBarRef","console","log","track","current","src","play","pause","addEventListener","e","target","removeEventListener","handleSliderChange","time","value","ref","getTime","isNaN","Math","floor","slice","progressDuration","progressTime","progress"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\n\nconst AudioPlayer = () => {\n  const [selectedTrack, setSelectedTrack] = useState({\n    title: \"False Nine Podcast #17 Champions League RO16 first leg review\",\n    by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n    link:\n      \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n    duration: 0,\n    date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n    currentTime: 0,\n    player: \"paused\"\n  });\n  // const [player, setPlayer] = useState(\"paused\");\n  const audioRef = useRef();\n  const prevTrack = usePrevious(selectedTrack);\n  const prevPlayer = usePrevious(player);\n  // const [duration, setDuration] = useState(0);\n  const seekBarRef = useRef()\n  useEffect(() => {\n      console.log(\"Ran\")\n    if (selectedTrack !== prevTrack) {\n      let track;\n      track = selectedTrack? selectedTrack.link : null;\n      if (track) {\n        audioRef.current.src = track;\n        audioRef.current.play();\n        \n        setSelectedTrack({...setSelectedTrack, player: \"playing\"});\n      }\n    }\n  }, [selectedTrack.title]);\n\n  useEffect(() => {\n      console.log(\"Ran this\")\n    if (selectedTrack.player !== prevPlayer) {\n      if (player === \"paused\") {\n        audioRef.current.pause();\n      } else if (player === \"playing\" && prevPlayer === \"paused\") {\n        audioRef.current.play();\n      }\n    }\n  },[selectedTrack.player]);\n\n  useEffect(() => {\n    console.log(\"Runner\");\n    audioRef.current.addEventListener(\"timeupdate\", e => {\n        setSelectedTrack({...selectedTrack, currentTime: e.target.currentTime, duration: e.target.duration})\n        \n    })\n      return () => {\n        audioRef.current.removeEventListener(\"timeupdate\", () => {});\n      }\n  }, [])\n\n  // useEffect(() => {\n  //   seekBarRef.current.addEventListener(\"change\", e => {\n  //       const time = duration * (e.target.value / 100);\n  //       audioRef.current.currentTime = time;\n  //       setCurrentTime(time);\n  //   })\n  //     return () => {\n  //       seekBarRef.current.removeEventListener(\"change\", () => {});\n  //     }\n  // }, [])\n\n  const handleSliderChange = (e) => {\n    const time = selectedTrack.duration * (e.target.value / 100);\n    audioRef.current.currentTime = time;\n    setSelectedTrack({...selectedTrack, currentTime: time})\n  }\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n  \n  function getTime(time) {\n    if(!isNaN(time)) {\n      return Math.floor(time / 60) + ':' + ('0' + Math.floor(time % 60)).slice(-2)\n    }\n  }\n  const progressDuration = getTime(selectedTrack.duration);\n  const progressTime = getTime(selectedTrack.currentTime);\n  const progress = (100/ selectedTrack.duration) * selectedTrack.currentTime\n  return (\n    <div>\n      <div>\n        {selectedTrack.player === \"paused\" && (\n          <button onClick={() => setSelectedTrack({...selectedTrack, player:\"playing\"})}>Play</button>\n        )}\n        {selectedTrack.player === \"playing\" && (\n          <button onClick={() => setSelectedTrack({...selectedTrack, player: \"paused\"})}>Pause</button>\n        )}\n      {selectedTrack.player === \"playing\" || selectedTrack.player === \"paused\" ? (\n          <div>\n            {progressTime} / {progressDuration}\n            <input ref={seekBarRef} type=\"range\" onChange={handleSliderChange} value={progress}/>\n          </div>\n        ) : (\n          \"\"\n        )}\n            \n      </div>\n\n      <audio ref={audioRef} />\n      {/*https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a  */}\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n"]},"metadata":{},"sourceType":"module"}