{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/Edit.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./Edit.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport TextEditor from \"../../components/TextEditor/TextEditor\";\nimport { Value } from \"slate\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nconst initialValue = {\n  document: {\n    nodes: [{\n      object: \"block\",\n      type: \"paragraph\",\n      nodes: [{\n        object: \"text\",\n        leaves: [{\n          text: \"This text is editable\"\n        }]\n      }]\n    }]\n  }\n};\n\nconst Edit = props => {\n  const [textEditorValue, setTextEditorValue] = useState(Value.fromJSON(initialValue));\n  const [formData, setFormData] = useState({\n    title: \"To be edited\",\n    author: \"To be edited\",\n    date: new Date(),\n    image: \"data:image/png;base64,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\"\n  });\n  const [article, setArticle] = useState({\n    id: {},\n    title: \"\",\n    author: \"\",\n    date: new Date(),\n    image: \"\"\n  });\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const [toolbarFixed, setToolbarFix] = useState(false);\n  const headerBoxRef = useRef();\n  const headlineFormRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixNavbar = e => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixNavbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixNavbar);\n    };\n  }, [sidePanelFixed]);\n  useEffect(() => {\n    const fixToolbar = e => {\n      if (window.scrollY > headerBoxRef.current.clientHeight + headlineFormRef.current.clientHeight - 66 + 644) {\n        setToolbarFix(true);\n      } else {\n        setToolbarFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixToolbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixToolbar);\n    };\n  }, [toolbarFixed]);\n  useEffect(() => {\n    console.log(id);\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    getArticle().then(res => {\n      setArticle({\n        id: res._id,\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image\n      });\n      if (res.content) setTextEditorValue(Value.fromJSON(res.content));\n    });\n  }, []);\n  useEffect(() => {\n    setFormData({\n      title: article.title,\n      author: article.author,\n      date: new Date(article.date),\n      image: article.image\n    });\n  }, [article.title, article.author, article.author, article.date, article.image]);\n  useEffect(() => {\n    const keyDownHandler = e => {\n      console.log(\"Running Effect\");\n\n      if (e.keyCode === 83 && e.ctrlKey) {\n        e.preventDefault();\n        saveArticle();\n      }\n    };\n\n    document.addEventListener(\"keydown\", keyDownHandler);\n    return () => {\n      document.removeEventListener(\"keydown\", keyDownHandler);\n    };\n  }, [article, textEditorValue]);\n\n  const saveArticle = async () => {\n    const editedArticle = { ...article,\n      content: textEditorValue.toJSON()\n    };\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(editedArticle)\n    };\n    const response = await fetch(`/articles/edit`, requestOptions);\n    const data = await response.json();\n    if (response.status !== 200) throw Error(data.message);\n    alert(\"Article saved\");\n  };\n\n  const getLinkFunction = linkType => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n\n      case Card.LinkType[\"article-internal\"]:\n        return articleLink => {\n          history.push(articleLink);\n        };\n\n      default:\n        break;\n    }\n  };\n\n  const renderOnceSidePanel = /*#__PURE__*/React.createElement(SidePanel, {\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    youtubeVideos: props.youtubeVideos,\n    getImageLink: props.getImageLink,\n    playVideo: props.playVideo,\n    getHyperLink: props.getHyperLink,\n    sidePanelFixed: sidePanelFixed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }\n  });\n\n  const handleSubmit = event => {\n    event.preventDefault(); // if(!(article.title === formData.title && article.image === formData.image && article.author === formData.author)){\n\n    setArticle({ ...article,\n      title: formData.title,\n      author: formData.author,\n      date: formData.date,\n      image: formData.image\n    });\n    console.log(article); // }\n  };\n\n  const onTitleChange = event => {\n    setFormData({ ...formData,\n      title: event.target.value\n    });\n  };\n\n  const onAuthorChange = event => {\n    setFormData({ ...formData,\n      author: event.target.value\n    });\n  };\n\n  const onDateChange = newDate => {\n    setFormData({ ...formData,\n      date: newDate\n    });\n  };\n\n  const onImageChange = event => {\n    setFormData({ ...formData,\n      image: event.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"overarching\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"primary-color-background\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"Edit\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    ref: headerBoxRef,\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    navbarClicked: props.navbarClicked,\n    setNavbarClicked: props.setNavbarClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"headline\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LargeCard, {\n    title: article.title,\n    author: article.author,\n    date: article.date,\n    image: article.image,\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"content-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"main-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    ref: headlineFormRef,\n    onSubmit: handleSubmit,\n    className: styles[\"headline-form\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }, \"Title: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"text\",\n    value: formData.title,\n    onChange: onTitleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal-same-line\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 19\n    }\n  }, \"Author: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: `${styles[\"headline-form-input\"]}`,\n    type: \"text\",\n    value: formData.author,\n    onChange: onAuthorChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 19\n    }\n  }, \"Date: \"), /*#__PURE__*/React.createElement(DatePicker, {\n    className: `${styles[\"DatePicker\"]}`,\n    selected: formData.date,\n    onChange: onDateChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"horizontal\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, \"Image: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: styles[\"headline-form-input\"],\n    type: \"text\",\n    value: formData.image,\n    onChange: onImageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Change Card\",\n    className: styles[\"submit-button\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(TextEditor, {\n    value: textEditorValue,\n    setValue: setTextEditorValue,\n    onSave: saveArticle,\n    toolbarFixed: toolbarFixed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"side-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 11\n    }\n  }), sidePanelFixed ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: props.topOffset,\n      right: \"0px\",\n      zIndex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: props.topOffset\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"footer-container\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Footer, {\n    selectedTrack: props.selectedTrack,\n    setSelectedTrack: props.setSelectedTrack,\n    player: props.player,\n    setPlayer: props.setPlayer,\n    forwardPodcasts: props.forwardPodcasts,\n    rewindPodcasts: props.rewindPodcasts,\n    currentTime: props.currentTime,\n    setCurrentTime: props.setCurrentTime,\n    audioRef: props.audioRef,\n    audioPlayerFixed: props.audioPlayerFixed,\n    setAudioPlayerFixed: props.setAudioPlayerFixed,\n    sidePanelFixed: sidePanelFixed,\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    navbarClicked: props.navbarClicked,\n    setNavbarClicked: props.setNavbarClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Edit;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/Edit.js"],"names":["React","useState","useEffect","useRef","LargeCard","SidePanel","Card","styles","Header","Footer","useHistory","useParams","TextEditor","Value","DatePicker","initialValue","document","nodes","object","type","leaves","text","Edit","props","textEditorValue","setTextEditorValue","fromJSON","formData","setFormData","title","author","date","Date","image","article","setArticle","id","history","sidePanelFixed","setSidePanelFix","toolbarFixed","setToolbarFix","headerBoxRef","headlineFormRef","window","scrollTo","fixNavbar","e","scrollY","current","clientHeight","addEventListener","removeEventListener","fixToolbar","console","log","getArticle","response","fetch","body","json","status","Error","message","then","res","_id","content","keyDownHandler","keyCode","ctrlKey","preventDefault","saveArticle","editedArticle","toJSON","requestOptions","method","headers","JSON","stringify","data","alert","getLinkFunction","linkType","LinkType","playVideo","articleLink","push","renderOnceSidePanel","sideBarClicked","setSideBarClicked","youtubeVideos","getImageLink","getHyperLink","handleSubmit","event","onTitleChange","target","value","onAuthorChange","onDateChange","newDate","onImageChange","navbarClicked","setNavbarClicked","position","top","topOffset","right","zIndex","marginTop","selectedTrack","setSelectedTrack","player","setPlayer","forwardPodcasts","rewindPodcasts","currentTime","setCurrentTime","audioRef","audioPlayerFixed","setAudioPlayerFixed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./Edit.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport TextEditor from \"../../components/TextEditor/TextEditor\";\nimport { Value } from \"slate\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nconst initialValue = {\n  document: {\n    nodes: [\n      {\n        object: \"block\",\n        type: \"paragraph\",\n        nodes: [\n          {\n            object: \"text\",\n            leaves: [\n              {\n                text: \"This text is editable\",\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n};\n\nconst Edit = (props) => {\n  \n  const [textEditorValue, setTextEditorValue] = useState(\n    Value.fromJSON(initialValue)\n  );\n  const [formData, setFormData] = useState({\n    title: \"To be edited\",\n    author: \"To be edited\",\n    date: new Date(),\n    image:\n      \"data:image/png;base64,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\",\n  });\n  const [article, setArticle] = useState({\n    id: {},\n    title: \"\",\n    author: \"\",\n    date: new Date(),\n    image: \"\",\n  });\n  const { id } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const [toolbarFixed, setToolbarFix] = useState(false);\n  const headerBoxRef = useRef();\n  const headlineFormRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixNavbar = (e) => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixNavbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixNavbar);\n    };\n  }, [sidePanelFixed]);\n\n  useEffect(() => {\n    const fixToolbar = (e) => {\n      if (\n        window.scrollY >\n        headerBoxRef.current.clientHeight +\n          headlineFormRef.current.clientHeight -\n          66 +\n          644\n      ) {\n        setToolbarFix(true);\n      } else {\n        setToolbarFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixToolbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixToolbar);\n    };\n  }, [toolbarFixed]);\n\n  useEffect(() => {\n    console.log(id);\n    const getArticle = async () => {\n      const response = await fetch(\"/articles?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n\n      return body;\n    };\n\n    getArticle().then((res) => {\n      setArticle({\n        id: res._id,\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n      });\n\n      if (res.content) setTextEditorValue(Value.fromJSON(res.content));\n    });\n  }, []);\n\n  useEffect(() => {\n    setFormData({\n      title: article.title,\n      author: article.author,\n      date: new Date(article.date),\n      image: article.image,\n    });\n  }, [\n    article.title,\n    article.author,\n    article.author,\n    article.date,\n    article.image,\n  ]);\n\n  useEffect(() => {\n    const keyDownHandler = (e) => {\n      console.log(\"Running Effect\");\n      if (e.keyCode === 83 && e.ctrlKey) {\n        e.preventDefault();\n        saveArticle();\n      }\n    };\n\n    document.addEventListener(\"keydown\", keyDownHandler);\n    return () => {\n      document.removeEventListener(\"keydown\", keyDownHandler);\n    };\n  }, [article, textEditorValue]);\n\n  const saveArticle = async () => {\n    const editedArticle = { ...article, content: textEditorValue.toJSON() };\n\n    const requestOptions = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(editedArticle),\n    };\n\n    const response = await fetch(`/articles/edit`, requestOptions);\n    const data = await response.json();\n    if (response.status !== 200) throw Error(data.message);\n    alert(\"Article saved\");\n  };\n\n  const getLinkFunction = (linkType) => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n      case Card.LinkType[\"article-internal\"]:\n        return (articleLink) => {\n          history.push(articleLink);\n        };\n      default:\n        break;\n    }\n  };\n\n  const renderOnceSidePanel = (\n    <SidePanel\n      sideBarClicked={props.sideBarClicked}\n      setSideBarClicked={props.setSideBarClicked}\n      youtubeVideos={props.youtubeVideos}\n      getImageLink={props.getImageLink}\n      playVideo={props.playVideo}\n      getHyperLink={props.getHyperLink}\n      sidePanelFixed={sidePanelFixed}\n    />\n  );\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // if(!(article.title === formData.title && article.image === formData.image && article.author === formData.author)){\n    setArticle({\n      ...article,\n      title: formData.title,\n      author: formData.author,\n      date: formData.date,\n      image: formData.image,\n    });\n    console.log(article);\n    // }\n  };\n\n  const onTitleChange = (event) => {\n    setFormData({\n      ...formData,\n      title: event.target.value,\n    });\n  };\n\n  const onAuthorChange = (event) => {\n    setFormData({\n      ...formData,\n      author: event.target.value,\n    });\n  };\n\n  const onDateChange = (newDate) => {\n    setFormData({\n      ...formData,\n      date: newDate,\n    });\n  };\n\n  const onImageChange = (event) => {\n    setFormData({\n      ...formData,\n      image: event.target.value,\n    });\n  };\n\n  return (\n    <div className={styles[\"overarching\"]}>\n      <div className={styles[\"primary-color-background\"]}></div>\n      <div className={styles[\"Edit\"]}>\n        <Header\n          ref={headerBoxRef}\n          sideBarClicked={props.sideBarClicked}\n          setSideBarClicked={props.setSideBarClicked}\n          navbarClicked={props.navbarClicked}\n          setNavbarClicked={props.setNavbarClicked}\n        />\n        <div className={styles[\"headline\"]}>\n          <LargeCard\n            title={article.title}\n            author={article.author}\n            date={article.date}\n            image={article.image}\n            onClick={() => {}}\n          />\n        </div>\n        <div className={styles[\"content-pane\"]}>\n          <div className={styles[\"main-pane\"]}>\n            <form\n              ref={headlineFormRef}\n              onSubmit={handleSubmit}\n              className={styles[\"headline-form\"]}\n            >\n              <div className={styles[\"horizontal\"]}>\n                <label>Title: </label>\n                <input\n                  className={styles[\"headline-form-input\"]}\n                  type=\"text\"\n                  value={formData.title}\n                  onChange={onTitleChange}\n                />\n              </div>\n              <div className={styles[\"horizontal-same-line\"]}>\n                <div className={styles[\"horizontal\"]}>\n                  <label>Author: </label>\n                  <input\n                    className={`${styles[\"headline-form-input\"]}`}\n                    type=\"text\"\n                    value={formData.author}\n                    onChange={onAuthorChange}\n                  />\n                </div>\n                <div className={styles[\"horizontal\"]}>\n                  <label>Date: </label>\n                  <DatePicker\n                    className={`${styles[\"DatePicker\"]}`}\n                    selected={formData.date}\n                    onChange={onDateChange}\n                  />\n                </div>\n              </div>\n              <div className={styles[\"horizontal\"]}>\n                <label>Image: </label>\n                <input\n                  className={styles[\"headline-form-input\"]}\n                  type=\"text\"\n                  value={formData.image}\n                  onChange={onImageChange}\n                />\n              </div>\n              <input\n                type=\"submit\"\n                value=\"Change Card\"\n                className={styles[\"submit-button\"]}\n              />\n            </form>\n            <TextEditor\n              value={textEditorValue}\n              setValue={setTextEditorValue}\n              onSave={saveArticle}\n              toolbarFixed={toolbarFixed}\n            />\n          </div>\n\n          <div className={styles[\"side-pane\"]}></div>\n          {sidePanelFixed ? (\n            <div\n              style={{ position: \"fixed\", top: props.topOffset, right: \"0px\",zIndex: 1  }}\n            >\n              {/* <div style={{ position: \"fixed\", top: \"103.5px\", right: \"0px\"}}> */}\n              {renderOnceSidePanel}\n            </div>\n          ) : (\n            <div style={{ marginTop: props.topOffset }}>\n              {renderOnceSidePanel}\n            </div>\n          )}\n        </div>\n\n        <div className={styles[\"footer-container\"]}>\n          <Footer\n             selectedTrack={props.selectedTrack}\n             setSelectedTrack={props.setSelectedTrack}\n             player={props.player}\n               setPlayer={props.setPlayer}\n               forwardPodcasts={props.forwardPodcasts}\n               rewindPodcasts={props.rewindPodcasts}\n               currentTime={props.currentTime}\n               setCurrentTime={props.setCurrentTime}\n               audioRef={props.audioRef}\n               audioPlayerFixed={props.audioPlayerFixed}\n               setAudioPlayerFixed={props.setAudioPlayerFixed}\n               sidePanelFixed={sidePanelFixed}\n               sideBarClicked={props.sideBarClicked}\n               setSideBarClicked={props.setSideBarClicked}\n               navbarClicked={props.navbarClicked}\n               setNavbarClicked={props.setNavbarClicked}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}