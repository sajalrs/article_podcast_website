{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/Controls.js\";\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport playerContext from '../../context/playerContext';\n\nconst Controls = () => {\n  // Global State\n  const {\n    currentSong,\n    songs,\n    nextSong,\n    prevSong,\n    repeat,\n    random,\n    playing,\n    toggleRandom,\n    toggleRepeat,\n    togglePlaying,\n    handleEnd\n  } = useContext(playerContext);\n  const audio = useRef('audio_tag'); // self State\n\n  const [statevolum, setStateVolum] = useState(0.3);\n  const [dur, setDur] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  const fmtMSS = s => {\n    return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~s;\n  };\n\n  const toggleAudio = () => audio.current.paused ? audio.current.play() : audio.current.pause();\n\n  const handleVolume = q => {\n    setStateVolum(q);\n    audio.current.volume = q;\n  };\n\n  const handleProgress = e => {\n    let compute = e.target.value * dur / 100;\n    setCurrentTime(compute);\n    audio.current.currentTime = compute;\n  };\n\n  useEffect(() => {\n    audio.current.volume = statevolum;\n\n    if (playing) {\n      toggleAudio();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [currentSong]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"audio\", {\n    onTimeUpdate: e => setCurrentTime(e.target.currentTime),\n    onCanPlay: e => setDur(e.target.duration),\n    onEnded: handleEnd,\n    ref: audio,\n    type: \"audio/mpeg\",\n    preload: \"true\",\n    src: songs[currentSong][1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vlme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"volum\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-volume-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    value: Math.round(statevolum * 100),\n    type: \"range\",\n    name: \"volBar\",\n    id: \"volBar\",\n    onChange: e => handleVolume(e.target.value / 100),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"musicControls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"prev\",\n    onClick: prevSong,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-step-backward\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 51\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"play\",\n    onClick: () => {\n      togglePlaying();\n      toggleAudio();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: !playing ? '' : 'hide',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-play\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 52\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: !playing ? 'hide' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-pause\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 52\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"next\",\n    onClick: nextSong,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-step-forward\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 51\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"currentT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, fmtMSS(currentTime)), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleProgress,\n    value: dur ? currentTime * 100 / dur : 0,\n    type: \"range\",\n    name: \"progresBar\",\n    id: \"prgbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"totalT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, fmtMSS(dur))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"plsoptions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: toggleRandom,\n    className: \"random \" + (random ? 'active' : ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-random\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: toggleRepeat,\n    className: \"repeat \" + (repeat ? 'active' : ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-redo-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Controls;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/Controls.js"],"names":["React","useState","useEffect","useRef","useContext","playerContext","Controls","currentSong","songs","nextSong","prevSong","repeat","random","playing","toggleRandom","toggleRepeat","togglePlaying","handleEnd","audio","statevolum","setStateVolum","dur","setDur","currentTime","setCurrentTime","fmtMSS","s","toggleAudio","current","paused","play","pause","handleVolume","q","volume","handleProgress","e","compute","target","value","duration","Math","round"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react'\nimport playerContext from '../../context/playerContext'\n\nconst Controls = () => {\n\n  // Global State\n  const {\n    currentSong,\n    songs,\n    nextSong,\n    prevSong,\n    repeat,\n    random,\n    playing,\n    toggleRandom,\n    toggleRepeat,\n    togglePlaying,\n    handleEnd,\n\n  } = useContext(playerContext)\n\n  const audio = useRef('audio_tag');\n\n  // self State\n  const [statevolum, setStateVolum] = useState(0.3)\n  const [dur, setDur] = useState(0)\n  const [currentTime, setCurrentTime] = useState(0)\n\n  const fmtMSS = (s) => { return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~(s) }\n\n  const toggleAudio = () => audio.current.paused ? audio.current.play() : audio.current.pause();\n\n  const handleVolume = (q) => {\n    setStateVolum(q);\n    audio.current.volume = q;\n  }\n\n  const handleProgress = (e) => {\n    let compute = (e.target.value * dur) / 100;\n    setCurrentTime(compute);\n    audio.current.currentTime = compute\n  }\n\n  useEffect(() => {\n    audio.current.volume = statevolum;\n    if (playing) { toggleAudio() }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentSong])\n\n  return (\n    <div className=\"controls\">\n      <audio\n\n        onTimeUpdate={(e) => setCurrentTime(e.target.currentTime)}\n        onCanPlay={(e) => setDur(e.target.duration)}\n        onEnded={handleEnd}\n\n        ref={audio}\n        type=\"audio/mpeg\"\n        preload='true'\n        src={songs[currentSong][1]} />\n      <div className=\"vlme\">\n\n        <span className=\"volum\"><i className=\"fas fa-volume-down\"></i></span>\n        <input value={Math.round(statevolum * 100)} type=\"range\" name=\"volBar\" id=\"volBar\" onChange={(e) => handleVolume(e.target.value / 100)} />\n\n      </div>\n      <div className=\"musicControls\">\n        <span className=\"prev\" onClick={prevSong}><i className=\"fas fa-step-backward\"></i></span>\n\n        <span className=\"play\" onClick={() => { togglePlaying(); toggleAudio(); }}>\n          <span className={!playing ? '' : 'hide'}><i className=\"fas fa-play\"></i></span>\n          <span className={!playing ? 'hide' : ''}><i className=\"fas fa-pause\"></i></span>\n        </span>\n\n        <span className=\"next\" onClick={nextSong}><i className=\"fas fa-step-forward\"></i></span>\n      </div>\n      <div className=\"progressb\">\n        <span className=\"currentT\">{fmtMSS(currentTime)}</span>\n        <input\n          onChange={handleProgress}\n          value={dur ? (currentTime * 100) / dur : 0}\n          type=\"range\" name=\"progresBar\" id=\"prgbar\" />\n        <span className=\"totalT\">{fmtMSS(dur)}</span>\n\n      </div>\n      <div className=\"plsoptions\">\n\n        <span onClick={toggleRandom} className={\"random \" + (random ? 'active' : '')}>\n          <i className=\"fas fa-random\"></i>\n        </span>\n        <span onClick={toggleRepeat} className={\"repeat \" + (repeat ? 'active' : '')}>\n          <i className=\"fas fa-redo-alt\"></i>\n        </span>\n      </div>\n    </div>\n  )\n}\n\nexport default Controls"]},"metadata":{},"sourceType":"module"}