{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/ArticlePage.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport SmallCard from \"../../components/Cards/SmallCard/SmallCard.js\";\nimport MediumCard from \"../../components/Cards/MediumCard/MediumCard.js\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./ArticlePage.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Html from 'slate-html-serializer';\n\nconst ArticlePage = props => {\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const headerBoxRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixNavbar = e => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixNavbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixNavbar);\n    };\n  }, [sidePanelFixed]);\n  const [article, setArticle] = useState({\n    title: \"\",\n    author: \"\",\n    date: \"\",\n    images: [],\n    content: `<p></p>`\n  });\n  const largeCardRef = useRef();\n  useEffect(() => {\n    const html = new Html({\n      rules\n    });\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles/?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    getArticle().then(res => {\n      setArticle({\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n        content: html.deserialize(res.content)\n      });\n      console.log(content);\n    });\n  }, []);\n  const BLOCK_TAGS = {\n    p: 'paragraph',\n    blockquote: 'block-quote',\n    ul: `bulleted-list`,\n    h1: `heading-one`,\n    h2: `heading-two`,\n    li: `list-item`,\n    ol: `numbered-list`,\n    img: `image`\n  }; // Add a dictionary of mark tags.\n\n  const MARK_TAGS = {\n    em: 'italic',\n    strong: 'bold',\n    u: 'underline',\n    code: `code`\n  };\n  const rules = [{\n    deserialize(el, next) {\n      const type = BLOCK_TAGS[el.tagName.toLowerCase()];\n\n      if (type) {\n        return {\n          object: 'block',\n          type: type,\n          data: {\n            className: el.getAttribute('class')\n          },\n          nodes: next(el.childNodes)\n        };\n      }\n    },\n\n    serialize(obj, children) {\n      if (obj.object == 'block') {\n        switch (obj.type) {\n          case 'paragraph':\n            return /*#__PURE__*/React.createElement(\"p\", {\n              className: obj.data.get('className'),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 22\n              }\n            }, children);\n\n          case \"block-quote\":\n            return /*#__PURE__*/React.createElement(\"blockquote\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 24\n              }\n            }, children);\n\n          case \"bulleted-list\":\n            return /*#__PURE__*/React.createElement(\"ul\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 24\n              }\n            }, children);\n\n          case \"heading-one\":\n            return /*#__PURE__*/React.createElement(\"h1\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 24\n              }\n            }, children);\n\n          case \"heading-two\":\n            return /*#__PURE__*/React.createElement(\"h2\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 24\n              }\n            }, children);\n\n          case \"list-item\":\n            return /*#__PURE__*/React.createElement(\"li\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 24\n              }\n            }, children);\n\n          case \"numbered-list\":\n            return /*#__PURE__*/React.createElement(\"ol\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 24\n              }\n            }, children);\n\n          case \"image\":\n            {\n              const src = obj.data.get('src');\n              return /*#__PURE__*/React.createElement(\"img\", {\n                src: src,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }\n              });\n            }\n        }\n      }\n    }\n\n  }, // Add a new rule that handles marks...\n  {\n    deserialize(el, next) {\n      const type = MARK_TAGS[el.tagName.toLowerCase()];\n\n      if (type) {\n        return {\n          object: 'mark',\n          type: type,\n          nodes: next(el.childNodes)\n        };\n      }\n    },\n\n    serialize(obj, children) {\n      if (obj.object == 'mark') {\n        switch (obj.type) {\n          case 'bold':\n            return /*#__PURE__*/React.createElement(\"strong\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 22\n              }\n            }, children);\n\n          case 'italic':\n            return /*#__PURE__*/React.createElement(\"em\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 22\n              }\n            }, children);\n\n          case 'code':\n            return /*#__PURE__*/React.createElement(\"code\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 22\n              }\n            }, children);\n\n          case 'underline':\n            return /*#__PURE__*/React.createElement(\"u\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 22\n              }\n            }, children);\n        }\n      }\n    }\n\n  }];\n\n  const getLinkFunction = linkType => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n\n      case Card.LinkType[\"article-internal\"]:\n        return articleLink => {\n          history.push(articleLink);\n        };\n\n      default:\n        break;\n    }\n  };\n\n  const renderOnceSidePanel = /*#__PURE__*/React.createElement(SidePanel, {\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    youtubeIds: props.youtubeIds,\n    getImageLink: props.getImageLink,\n    playVideo: props.playVideo,\n    getHyperLink: props.getHyperLink,\n    sidePanelFixed: sidePanelFixed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"overarching\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"primary-color-background\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"ArticlePage\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    ref: headerBoxRef,\n    sideBarClicked: props.sideBarClicked,\n    setSideBarClicked: props.setSideBarClicked,\n    navbarClicked: props.navbarClicked,\n    setNavbarClicked: props.setNavbarClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"headline\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LargeCard, {\n    title: article.title,\n    author: article.author,\n    date: article.date,\n    image: article.image,\n    onClick: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"content-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"main-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"main-pane-item\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"side-pane\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }), sidePanelFixed ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: props.topOffset,\n      right: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: props.topOffset\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }\n  }, renderOnceSidePanel)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"footer-container\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default ArticlePage;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/pages/Articles/ArticlePage.js"],"names":["React","useState","useEffect","useRef","SmallCard","MediumCard","LargeCard","SidePanel","Card","styles","Header","Footer","useHistory","useParams","Html","ArticlePage","props","id","history","sidePanelFixed","setSidePanelFix","headerBoxRef","window","scrollTo","fixNavbar","e","scrollY","current","clientHeight","addEventListener","removeEventListener","article","setArticle","title","author","date","images","content","largeCardRef","html","rules","getArticle","response","fetch","body","json","status","Error","message","then","res","image","deserialize","console","log","BLOCK_TAGS","p","blockquote","ul","h1","h2","li","ol","img","MARK_TAGS","em","strong","u","code","el","next","type","tagName","toLowerCase","object","data","className","getAttribute","nodes","childNodes","serialize","obj","children","get","src","getLinkFunction","linkType","LinkType","playVideo","articleLink","push","renderOnceSidePanel","sideBarClicked","setSideBarClicked","youtubeIds","getImageLink","getHyperLink","navbarClicked","setNavbarClicked","position","top","topOffset","right","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport SmallCard from \"../../components/Cards/SmallCard/SmallCard.js\";\nimport MediumCard from \"../../components/Cards/MediumCard/MediumCard.js\";\nimport LargeCard from \"../../components/Cards/LargeCard/LargeCard.js\";\nimport SidePanel from \"../../components/SidePanel/SidePanel.js\";\nimport Card from \"../../components/Cards/Card.js\";\nimport styles from \"./ArticlePage.module.css\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport Html from 'slate-html-serializer'\nconst ArticlePage = (props) => {\n  const { id } = useParams();\n  const history = useHistory();\n  const [sidePanelFixed, setSidePanelFix] = useState(false);\n  const headerBoxRef = useRef();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const fixNavbar = (e) => {\n      if (window.scrollY > headerBoxRef.current.clientHeight - 66 - 35 + 644) {\n        setSidePanelFix(true);\n      } else {\n        setSidePanelFix(false);\n      }\n    };\n\n    window.addEventListener(\"scroll\", fixNavbar);\n    return () => {\n      window.removeEventListener(\"scroll\", fixNavbar);\n    };\n  }, [sidePanelFixed]);\n\n  const [article, setArticle] = useState({\n    title: \"\",\n    author: \"\",\n    date: \"\",\n    images: [],\n    content: `<p></p>`\n  });\n\n  const largeCardRef = useRef();\n  useEffect(() => {\n    const html = new Html({rules})\n\n    const getArticle = async () => {\n      const response = await fetch(\"/articles/?\" + id);\n      const body = await response.json();\n      if (response.status !== 200) throw Error(body.message);\n\n      return body;\n    };\n\n    getArticle().then((res) => {\n      setArticle({\n        title: res.title,\n        author: res.author,\n        date: res.date,\n        image: res.image,\n        content: html.deserialize(res.content) \n      });\n      console.log(content);\n    }\n    \n    );\n  }, []);\n\n\n  const BLOCK_TAGS = {\n    p: 'paragraph',\n    blockquote: 'block-quote',\n    ul: `bulleted-list`,\n    h1: `heading-one`,\n    h2: `heading-two`,\n    li: `list-item`,\n    ol: `numbered-list`,\n    img: `image`\n  }\n  \n  // Add a dictionary of mark tags.\n  const MARK_TAGS = {\n    em: 'italic',\n    strong: 'bold',\n    u: 'underline',\n    code: `code`\n  }\n  \n  const rules = [\n    {\n      deserialize(el, next) {\n        const type = BLOCK_TAGS[el.tagName.toLowerCase()]\n        if (type) {\n          return {\n            object: 'block',\n            type: type,\n            data: {\n              className: el.getAttribute('class'),\n            },\n            nodes: next(el.childNodes),\n          }\n        }\n      },\n      serialize(obj, children) {\n        if (obj.object == 'block') {\n          switch (obj.type) {\n            case 'paragraph':\n              return <p className={obj.data.get('className')}>{children}</p>\n              case \"block-quote\":\n                return <blockquote>{children}</blockquote>;\n              case \"bulleted-list\":\n                return <ul>{children}</ul>;\n              case \"heading-one\":\n                return <h1>{children}</h1>;\n              case \"heading-two\":\n                return <h2>{children}</h2>;\n              case \"list-item\":\n                return <li>{children}</li>;\n              case \"numbered-list\":\n                return <ol>{children}</ol>;\n              case \"image\": {\n                const src = obj.data.get('src')\n                return (\n                  <img\n                    src={src}\n                  />\n                )\n              }\n          }\n        }\n      },\n    },\n    // Add a new rule that handles marks...\n    {\n      deserialize(el, next) {\n        const type = MARK_TAGS[el.tagName.toLowerCase()]\n        if (type) {\n          return {\n            object: 'mark',\n            type: type,\n            nodes: next(el.childNodes),\n          }\n        }\n      },\n      serialize(obj, children) {\n        if (obj.object == 'mark') {\n          switch (obj.type) {\n            case 'bold':\n              return <strong>{children}</strong>\n            case 'italic':\n              return <em>{children}</em>\n            case 'code':\n              return <code>{children}</code>\n            case 'underline':\n              return <u>{children}</u>\n          }\n        }\n      },\n    },\n  ]\n\n  const getLinkFunction = (linkType) => {\n    switch (linkType) {\n      case Card.LinkType[\"video-youtube\"]:\n        return props.playVideo;\n      case Card.LinkType[\"article-internal\"]:\n        return (articleLink) => {\n          history.push(articleLink);\n        };\n      default:\n        break;\n    }\n  };\n  const renderOnceSidePanel = (\n    <SidePanel\n      sideBarClicked={props.sideBarClicked}\n      setSideBarClicked={props.setSideBarClicked}\n      youtubeIds={props.youtubeIds}\n      getImageLink={props.getImageLink}\n      playVideo={props.playVideo}\n      getHyperLink={props.getHyperLink}\n      sidePanelFixed={sidePanelFixed}\n    />\n  );\n\n\n  return (\n    <div className={styles[\"overarching\"]}>\n      <div className={styles[\"primary-color-background\"]}></div>\n      <div className={styles[\"ArticlePage\"]}>\n        <Header\n          ref={headerBoxRef}\n          sideBarClicked={props.sideBarClicked}\n          setSideBarClicked={props.setSideBarClicked}\n          navbarClicked={props.navbarClicked}\n          setNavbarClicked={props.setNavbarClicked}\n        />\n        <div className={styles[\"headline\"]}>\n          <LargeCard\n            title={article.title}\n            author={article.author}\n            date={article.date}\n            image={article.image}\n            onClick={() => {}}\n          />\n        </div>\n        <div className={styles[\"content-pane\"]}>\n          <div className={styles[\"main-pane\"]}>\n            <div className={styles[\"main-pane-item\"]}></div>\n\n            {/* {article.sections.map((item) => {\n              return (\n                <div>\n                  {item.hasOwnProperty(\"subheading\") ? (\n                    <h2 className={styles[\"subheading\"]}>{item.subheading}</h2>\n                  ) : item.hasOwnProperty(\"paragraph\") ? (\n                    <p>{item.paragraph.text}</p>\n                  ) : item.hasOwnProperty(\"image\") ? (\n                    <div className={styles[\"main-pane-item\"]}>\n                      <figure className={styles[\"image-container\"]}>\n                        <img src={item.image.src} alt={item.image.caption} />\n                        <figcaption>\n                          {item.image.caption? (<i><strong>Picture:</strong> {item.image.caption}</i>) : null}\n                        </figcaption>\n                      </figure>\n                    </div>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              );\n            })} */}\n\n\n          </div>\n\n          <div className={styles[\"side-pane\"]}></div>\n          {sidePanelFixed ? (\n            <div\n              style={{ position: \"fixed\", top: props.topOffset, right: \"0px\" }}\n            >\n              {/* <div style={{ position: \"fixed\", top: \"103.5px\", right: \"0px\"}}> */}\n              {renderOnceSidePanel}\n            </div>\n          ) : (\n            <div style={{ marginTop: props.topOffset }}>\n              {renderOnceSidePanel}\n            </div>\n          )}\n        </div>\n\n        <div className={styles[\"footer-container\"]}>\n          <Footer />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArticlePage;\n"]},"metadata":{},"sourceType":"module"}