{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/TextEditor/TextEditor.js\";\nimport React, { useState, useRef } from \"react\";\nimport { Editor, getEventTransfer } from \"slate-react\";\nimport { Block } from \"slate\";\nimport styles from \"./TextEditor.module.css\";\nimport FormatToolbar from \"./FormatToolbar\";\nimport { isKeyHotkey } from \"is-hotkey\";\nimport imageExtensions from \"image-extensions\";\nimport isUrl from \"is-url\";\nconst schema = {\n  document: {\n    last: {\n      type: \"paragraph\"\n    },\n    normalize: (editor, {\n      code,\n      node,\n      child\n    }) => {\n      switch (code) {\n        case \"last_child_type_invalid\":\n          {\n            const paragraph = Block.create(\"paragraph\");\n            return editor.insertNodeByKey(node.key, node.nodes.size, paragraph);\n          }\n      }\n    }\n  },\n  blocks: {\n    image: {\n      isVoid: true\n    }\n  }\n};\nconst initialValue = {\n  document: {\n    nodes: [{\n      object: \"block\",\n      type: \"paragraph\",\n      nodes: [{\n        object: \"text\",\n        leaves: [{\n          text: \"This text is editable\"\n        }]\n      }]\n    }]\n  }\n};\n\nconst TextEditor = props => {\n  const ref = useRef();\n  const value = props.value || initialValue;\n  const setValue = props.setValue;\n  const DEFAULT_NODE = \"paragraph\";\n  const isBoldHotkey = isKeyHotkey(\"mod+b\");\n  const isItalicHotkey = isKeyHotkey(\"mod+i\");\n  const isUnderlinedHotkey = isKeyHotkey(\"mod+u\");\n  const isCodeHotkey = isKeyHotkey(\"mod+`\");\n  const isTabHotkey = isKeyHotkey(\"tab\");\n  const bodyStyles = props.styles;\n\n  const hasMark = type => {\n    return value.activeMarks.some(mark => mark.type === type);\n  };\n\n  const hasBlock = type => {\n    return value.blocks.some(node => node.type === type);\n  };\n\n  const isImage = url => {\n    return imageExtensions.includes(getExtension(url));\n  };\n\n  const getExtension = url => {\n    return new URL(url).pathname.split(\".\").pop;\n  };\n\n  const insertImage = (editor, src, target) => {\n    if (target) {\n      editor.select(target);\n    }\n\n    editor.insertBlock({\n      type: \"image\",\n      data: {\n        src\n      }\n    });\n  };\n\n  const insertFigure = (editor, src, target) => {\n    if (target) {\n      editor.select(target);\n    }\n\n    editor.insertBlock({\n      type: \"figure\",\n      data: {\n        src\n      }\n    });\n  };\n\n  const renderMarkButton = (type, icon) => {\n    const isActive = hasMark(type);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onPointerDown: event => onClickMark(event, type),\n      className: isActive ? `${styles[\"active\"]} ${styles[\"tooltip-icon-button\"]}` : styles[\"tooltip-icon-button\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderImageButton = icon => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles[\"tooltip-icon-button\"],\n      onPointerDown: onClickImage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderSaveButton = icon => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles[\"tooltip-icon-button\"],\n      onPointerDown: props.onSave ? props.onSave : () => console.log(JSON.stringify(value.toJSON())),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderFigureButton = icon => {\n    let isActive = hasBlock(\"figure\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: isActive ? `${styles[\"active\"]} ${styles[\"tooltip-icon-button\"]}` : styles[\"tooltip-icon-button\"],\n      onPointerDown: onClickFigure,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderBlockButton = (type, icon) => {\n    let isActive = hasBlock(type);\n\n    if ([\"numbered-list\", \"bulleted-list\"].includes(type)) {\n      const {\n        document,\n        blocks\n      } = value;\n\n      if (blocks.size > 0) {\n        const parent = document.getParent(blocks.first().key);\n        isActive = hasBlock(\"list-item\") && parent && parent.type === type;\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: isActive ? `${styles[\"active\"]} ${styles[\"tooltip-icon-button\"]}` : styles[\"tooltip-icon-button\"],\n      onPointerDown: event => onClickBlock(event, type),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: icon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const renderBlock = (props, editor, next) => {\n    const {\n      attributes,\n      children,\n      node\n    } = props;\n\n    switch (node.type) {\n      case \"paragraph\":\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: bodyStyles[\"main-pane-item\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }\n        }, children));\n\n      case \"block-quote\":\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: bodyStyles[\"main-pane-item\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"blockquote\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }\n        }, children));\n\n      case \"bulleted-list\":\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: bodyStyles[\"main-pane-item\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"ul\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }\n        }, children));\n\n      case \"heading-one\":\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: bodyStyles[\"main-pane-item\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          className: bodyStyles[\"heading\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }\n        }, children));\n\n      case \"heading-two\":\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: bodyStyles[\"main-pane-item\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }\n        }, children));\n\n      case \"list-item\":\n        return /*#__PURE__*/React.createElement(\"li\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }\n        }, children);\n\n      case \"numbered-list\":\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: bodyStyles[\"main-pane-item\"],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"ol\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }\n        }, children));\n\n      case \"image\":\n        {\n          const src = node.data.get(\"src\");\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: bodyStyles[\"main-pane-item\"],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"figure\", {\n            className: bodyStyles[\"image-container\"],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: src,\n            loading: \"lazy\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }\n          })));\n        }\n\n      case \"figure\":\n        {\n          const src = node.data.get(\"src\");\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: bodyStyles[\"main-pane-item\"],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"figure\", {\n            className: bodyStyles[\"image-container\"],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: src,\n            loading: \"lazy\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }\n          }), /*#__PURE__*/React.createElement(\"figcaption\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"strong\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }\n          }, children))));\n        }\n\n      default:\n        return next();\n    }\n  };\n\n  const renderMark = (props, editor, next) => {\n    const {\n      children,\n      mark,\n      attributes\n    } = props;\n\n    switch (mark.type) {\n      case \"bold\":\n        return /*#__PURE__*/React.createElement(\"strong\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"code\":\n        return /*#__PURE__*/React.createElement(\"code\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"italic\":\n        return /*#__PURE__*/React.createElement(\"em\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 16\n          }\n        }), children);\n\n      case \"underlined\":\n        return /*#__PURE__*/React.createElement(\"u\", Object.assign({}, attributes, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 16\n          }\n        }), children);\n\n      default:\n        return next();\n    }\n  };\n\n  const onKeyDown = (event, editor, next) => {\n    let mark;\n\n    if (isBoldHotkey(event)) {\n      mark = \"bold\";\n    } else if (isItalicHotkey(event)) {\n      mark = \"italic\";\n    } else if (isUnderlinedHotkey(event)) {\n      mark = \"underlined\";\n    } else if (isCodeHotkey(event)) {\n      mark = \"code\";\n    } else if (isTabHotkey(event)) {\n      event.preventDefault();\n      return next();\n    } else {\n      return next();\n    }\n\n    event.preventDefault();\n    editor.toggleMark(mark);\n  };\n\n  const onClickMark = (event, type) => {\n    event.preventDefault();\n    ref.current.toggleMark(type);\n  };\n\n  const onClickImage = event => {\n    event.preventDefault();\n    const src = window.prompt(\"enter the URL of the image:\"); // const caption = window.prompt(\"enter a caption for the image\")\n\n    if (!src) return;\n    ref.current.command(insertImage, src);\n  };\n\n  const onClickFigure = event => {\n    event.preventDefault();\n    const src = window.prompt(\"enter the URL of the image:\");\n    if (!src) return;\n    ref.current.command(insertFigure, src);\n  };\n\n  const onClickBlock = (event, type) => {\n    event.preventDefault();\n    const editor = ref.current;\n    const value = editor.value;\n    const document = value.document; // Handle everything but list buttons.\n\n    if (type !== \"bulleted-list\" && type !== \"numbered-list\") {\n      const isActive = hasBlock(type);\n      const isList = hasBlock(\"list-item\");\n\n      if (isList) {\n        editor.setBlocks(isActive ? DEFAULT_NODE : type).unwrapBlock(\"bulleted-list\").unwrapBlock(\"numbered-list\");\n      } else {\n        editor.setBlocks(isActive ? DEFAULT_NODE : type);\n      }\n    } else {\n      // Handle the extra wrapping required for list buttons.\n      const isList = hasBlock(\"list-item\");\n      const isType = value.blocks.some(block => {\n        return !!document.getClosest(block.key, parent => parent.type === type);\n      });\n\n      if (isList && isType) {\n        editor.setBlocks(DEFAULT_NODE).unwrapBlock(\"bulleted-list\").unwrapBlock(\"numbered-list\");\n      } else if (isList) {\n        editor.unwrapBlock(type === \"bulleted-list\" ? \"numbered-list\" : \"bulleted-list\").wrapBlock(type);\n      } else {\n        editor.setBlocks(\"list-item\").wrapBlock(type);\n      }\n    }\n  };\n\n  const onDropOrPaste = (event, editor, next) => {\n    const target = editor.findEventRange(event);\n    if (!target && event.type === \"drop\") return next();\n    const transfer = getEventTransfer(event);\n    const {\n      type,\n      text,\n      files\n    } = transfer;\n\n    if (type === \"files\") {\n      for (const file of files) {\n        const reader = new FileReader();\n        const [mime] = file.type.split(\"/\");\n        if (mime !== \"image\") continue;\n        reader.addEventListener(\"load\", () => {\n          editor.command(insertImage, reader.result, target);\n        });\n        reader.readAsDataURL(file);\n      }\n\n      return;\n    }\n\n    if (type === \"text\") {\n      if (!isUrl(text)) return next();\n      if (!isImage(text)) return next();\n      editor.command(insertImage, text, target);\n      return;\n    }\n\n    next();\n  };\n\n  const renderOnceToolbar = /*#__PURE__*/React.createElement(FormatToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 5\n    }\n  }, renderMarkButton(\"bold\", `${styles[\"fas\"]} ${styles[\"fa-bold\"]} fas fa-bold`), renderMarkButton(\"italic\", `${styles[\"fas\"]} ${styles[\"fa-italic\"]} fas fa-italic`), renderMarkButton(\"underlined\", `${styles[\"fas\"]} ${styles[\"fa-underline\"]} fas fa-underline`), renderMarkButton(\"code\", `${styles[\"fas\"]} ${styles[\"fa-code\"]} fas fa-code`), renderBlockButton(\"heading-one\", `${styles[\"fas\"]} ${styles[\"fa-h1\"]} fas fa-heading`), renderBlockButton(\"heading-two\", `${styles[\"fas\"]} ${styles[\"fa-h2\"]} fas fa-heading`), renderBlockButton(\"block-quote\", `${styles[\"fas\"]} ${styles[\"fa-quote-right\"]} fas fa-quote-right`), renderBlockButton(\"numbered-list\", `${styles[\"fas\"]} ${styles[\"fa-list-ol\"]} fas fa-list-ol`), renderBlockButton(\"bulleted-list\", `${styles[\"fas\"]} ${styles[\"fa-list-ul\"]} fas fa-list-ul`), renderImageButton(`${styles[\"fas\"]} ${styles[\"fa-image\"]} fas fa-image`), renderFigureButton(`${styles[\"fas\"]} ${styles[\"fa-images\"]} fas fa-images`), renderSaveButton(`${styles[\"fas\"]} ${styles[\"fa-save\"]} fas fa-save`));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"overarching\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 5\n    }\n  }, props.toolbarFixed ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      top: \"66px\",\n      backgroundColor: \"#fff\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 13\n    }\n  }, renderOnceToolbar) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 13\n    }\n  }, renderOnceToolbar), /*#__PURE__*/React.createElement(Editor, {\n    ref: ref,\n    className: styles[\"Editor\"],\n    value: value,\n    onChange: opts => setValue(opts.value),\n    onKeyDown: onKeyDown,\n    renderMark: renderMark,\n    renderBlock: renderBlock,\n    onDrop: onDropOrPaste,\n    schema: schema,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport const getRules = cssStyles => {\n  const BLOCK_TAGS = {\n    p: \"paragraph\",\n    blockquote: \"block-quote\",\n    ul: `bulleted-list`,\n    h1: `heading-one`,\n    h2: `heading-two`,\n    li: `list-item`,\n    ol: `numbered-list`,\n    img: `image`\n  }; // Add a dictionary of mark tags.\n\n  const MARK_TAGS = {\n    em: \"italic\",\n    strong: \"bold\",\n    u: \"underlined\",\n    code: `code`\n  };\n  const rules = [{\n    deserialize(el, next) {\n      const type = BLOCK_TAGS[el.tagName.toLowerCase()];\n\n      if (type) {\n        return {\n          object: \"block\",\n          type: type,\n          data: {\n            className: el.getAttribute(\"class\")\n          },\n          nodes: next(el.childNodes)\n        };\n      }\n    },\n\n    serialize(obj, children) {\n      if (obj.object == \"block\") {\n        switch (obj.type) {\n          case \"paragraph\":\n            return /*#__PURE__*/React.createElement(\"di\", {\n              className: cssStyles[\"main-pane\"],\n              v: true,\n              className: cssStyles[\"main-pane-item\"],\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"p\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 19\n              }\n            }, children));\n\n          case \"block-quote\":\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: `${cssStyles[\"main-pane-item\"]}`,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"blockquote\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 19\n              }\n            }, children));\n\n          case \"bulleted-list\":\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: cssStyles[\"main-pane-item\"],\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"ul\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 19\n              }\n            }, children));\n\n          case \"heading-one\":\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: cssStyles[\"main-pane-item\"],\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"h1\", {\n              className: cssStyles[\"heading\"],\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 19\n              }\n            }, children));\n\n          case \"heading-two\":\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: cssStyles[\"main-pane-item\"],\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"h2\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }\n            }, children));\n\n          case \"list-item\":\n            return /*#__PURE__*/React.createElement(\"li\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 22\n              }\n            }, children);\n\n          case \"numbered-list\":\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: cssStyles[\"main-pane-item\"],\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"ol\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 19\n              }\n            }, children));\n\n          case \"image\":\n            {\n              const src = obj.data[\"src\"];\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: `${cssStyles[\"main-pane-item\"]}`,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"figure\", {\n                className: cssStyles[\"image-container\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"img\", {\n                src: src,\n                loading: \"lazy\",\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }\n              })));\n            }\n\n          case \"figure\":\n            {\n              const src = obj.data[\"src\"];\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: `${cssStyles[\"main-pane-item\"]}`,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 17\n                }\n              }, /*#__PURE__*/React.createElement(\"figure\", {\n                className: cssStyles[\"image-container\"],\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 19\n                }\n              }, /*#__PURE__*/React.createElement(\"img\", {\n                src: src,\n                loading: \"lazy\",\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 21\n                }\n              }), /*#__PURE__*/React.createElement(\"figcaption\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 21\n                }\n              }, /*#__PURE__*/React.createElement(\"strong\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 23\n                }\n              }, children))));\n            }\n        }\n      }\n    }\n\n  }, // Add a new rule that handles marks...\n  {\n    deserialize(el, next) {\n      const type = MARK_TAGS[el.tagName.toLowerCase()];\n\n      if (type) {\n        return {\n          object: \"mark\",\n          type: type,\n          nodes: next(el.childNodes)\n        };\n      }\n    },\n\n    serialize(obj, children) {\n      if (obj.object == \"mark\") {\n        switch (obj.type) {\n          case \"bold\":\n            return /*#__PURE__*/React.createElement(\"strong\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 22\n              }\n            }, children);\n\n          case \"italic\":\n            return /*#__PURE__*/React.createElement(\"em\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 22\n              }\n            }, children);\n\n          case \"code\":\n            return /*#__PURE__*/React.createElement(\"code\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 22\n              }\n            }, children);\n\n          case \"underlined\":\n            return /*#__PURE__*/React.createElement(\"u\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 22\n              }\n            }, children);\n        }\n      }\n    }\n\n  }];\n  return rules;\n};\nexport default TextEditor;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/TextEditor/TextEditor.js"],"names":["React","useState","useRef","Editor","getEventTransfer","Block","styles","FormatToolbar","isKeyHotkey","imageExtensions","isUrl","schema","document","last","type","normalize","editor","code","node","child","paragraph","create","insertNodeByKey","key","nodes","size","blocks","image","isVoid","initialValue","object","leaves","text","TextEditor","props","ref","value","setValue","DEFAULT_NODE","isBoldHotkey","isItalicHotkey","isUnderlinedHotkey","isCodeHotkey","isTabHotkey","bodyStyles","hasMark","activeMarks","some","mark","hasBlock","isImage","url","includes","getExtension","URL","pathname","split","pop","insertImage","src","target","select","insertBlock","data","insertFigure","renderMarkButton","icon","isActive","event","onClickMark","renderImageButton","onClickImage","renderSaveButton","onSave","console","log","JSON","stringify","toJSON","renderFigureButton","onClickFigure","renderBlockButton","parent","getParent","first","onClickBlock","renderBlock","next","attributes","children","get","renderMark","onKeyDown","preventDefault","toggleMark","current","window","prompt","command","isList","setBlocks","unwrapBlock","isType","block","getClosest","wrapBlock","onDropOrPaste","findEventRange","transfer","files","file","reader","FileReader","mime","addEventListener","result","readAsDataURL","renderOnceToolbar","toolbarFixed","position","top","backgroundColor","opts","getRules","cssStyles","BLOCK_TAGS","p","blockquote","ul","h1","h2","li","ol","img","MARK_TAGS","em","strong","u","rules","deserialize","el","tagName","toLowerCase","className","getAttribute","childNodes","serialize","obj"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Editor, getEventTransfer } from \"slate-react\";\nimport { Block } from \"slate\";\nimport styles from \"./TextEditor.module.css\";\nimport FormatToolbar from \"./FormatToolbar\";\nimport { isKeyHotkey } from \"is-hotkey\";\nimport imageExtensions from \"image-extensions\";\nimport isUrl from \"is-url\";\n\n\n\nconst schema = {\n  document: {\n    last: { type: \"paragraph\" },\n    normalize: (editor, { code, node, child }) => {\n      switch (code) {\n        case \"last_child_type_invalid\": {\n          const paragraph = Block.create(\"paragraph\");\n          return editor.insertNodeByKey(node.key, node.nodes.size, paragraph);\n        }\n      }\n    },\n  },\n  blocks: {\n    image: {\n      isVoid: true,\n    },\n  },\n};\n\nconst initialValue = {\n  document: {\n    nodes: [\n      {\n        object: \"block\",\n        type: \"paragraph\",\n        nodes: [\n          {\n            object: \"text\",\n            leaves: [\n              {\n                text: \"This text is editable\",\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  },\n};\n\nconst TextEditor = (props) => {\n  const ref = useRef();\n  const value = props.value || initialValue;\n  const setValue = props.setValue;\n  const DEFAULT_NODE = \"paragraph\";\n  const isBoldHotkey = isKeyHotkey(\"mod+b\");\n  const isItalicHotkey = isKeyHotkey(\"mod+i\");\n  const isUnderlinedHotkey = isKeyHotkey(\"mod+u\");\n  const isCodeHotkey = isKeyHotkey(\"mod+`\");\n  const isTabHotkey = isKeyHotkey(\"tab\");\n  const bodyStyles = props.styles;\n\n  const hasMark = (type) => {\n    return value.activeMarks.some((mark) => mark.type === type);\n  };\n\n  const hasBlock = (type) => {\n    return value.blocks.some((node) => node.type === type);\n  };\n\n  const isImage = (url) => {\n    return imageExtensions.includes(getExtension(url));\n  };\n\n  const getExtension = (url) => {\n    return new URL(url).pathname.split(\".\").pop;\n  };\n\n  const insertImage = (editor, src, target) => {\n    if (target) {\n      editor.select(target);\n    }\n\n    editor.insertBlock({\n      type: \"image\",\n      data: { src },\n    });\n  };\n\n  const insertFigure = (editor, src, target) => {\n    if (target) {\n      editor.select(target);\n    }\n\n    editor.insertBlock({\n      type: \"figure\",\n      data: { src },\n    });\n  };\n\n  const renderMarkButton = (type, icon) => {\n    const isActive = hasMark(type);\n    return (\n      <div\n        onPointerDown={(event) => onClickMark(event, type)}\n        className={\n          isActive\n            ? `${styles[\"active\"]} ${styles[\"tooltip-icon-button\"]}`\n            : styles[\"tooltip-icon-button\"]\n        }\n      >\n        <i className={icon} />\n      </div>\n    );\n  };\n\n  const renderImageButton = (icon) => {\n    return (\n      <div\n        className={styles[\"tooltip-icon-button\"]}\n        onPointerDown={onClickImage}\n      >\n        <i className={icon} />\n      </div>\n    );\n  };\n\n  const renderSaveButton = (icon) => {\n    return (\n      <div\n        className={styles[\"tooltip-icon-button\"]}\n        onPointerDown={\n          props.onSave\n            ? props.onSave\n            : () => console.log(JSON.stringify(value.toJSON()))\n        }\n      >\n        <i className={icon} />\n      </div>\n    );\n  };\n\n  const renderFigureButton = (icon) => {\n    let isActive = hasBlock(\"figure\");\n    return (\n      <div\n      className={\n        isActive\n          ? `${styles[\"active\"]} ${styles[\"tooltip-icon-button\"]}`\n          : styles[\"tooltip-icon-button\"]\n      }\n        onPointerDown={onClickFigure}\n      >\n        <i className={icon} />\n      </div>\n    );\n  };\n\n  const renderBlockButton = (type, icon) => {\n    let isActive = hasBlock(type);\n    if ([\"numbered-list\", \"bulleted-list\"].includes(type)) {\n      const { document, blocks } = value;\n\n      if (blocks.size > 0) {\n        const parent = document.getParent(blocks.first().key);\n        isActive = hasBlock(\"list-item\") && parent && parent.type === type;\n      }\n    }\n\n    return (\n      <div\n        className={\n          isActive\n            ?`${styles[\"active\"]} ${styles[\"tooltip-icon-button\"]}`\n            : styles[\"tooltip-icon-button\"]\n        }\n        onPointerDown={(event) => onClickBlock(event, type)}\n      >\n        <i className={icon}></i>\n      </div>\n    );\n  };\n\n  const renderBlock = (props, editor, next) => {\n    const { attributes, children, node } = props;\n\n    switch (node.type) {\n      case \"paragraph\":\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <p>{children}</p>\n          </div>\n        );\n      case \"block-quote\":\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <blockquote>{children}</blockquote>\n          </div>\n        );\n      case \"bulleted-list\":\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <ul>{children}</ul>\n          </div>\n        );\n      case \"heading-one\":\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <h1 className={bodyStyles[\"heading\"]}>{children}</h1>\n          </div>\n        );\n      case \"heading-two\":\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <h2>{children}</h2>\n          </div>\n        );\n      case \"list-item\":\n        return (\n            <li>{children}</li>\n        );\n      case \"numbered-list\":\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <ol>{children}</ol>\n          </div>\n        );\n      case \"image\": {\n        const src = node.data.get(\"src\");\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <figure className={bodyStyles[\"image-container\"]}>\n              <img src={src} loading=\"lazy\" />\n            </figure>\n          </div>\n        );\n      }\n      case \"figure\": {\n        const src = node.data.get(\"src\");\n        return (\n          <div className={bodyStyles[\"main-pane-item\"]}>\n            <figure className={bodyStyles[\"image-container\"]}>\n              <img src={src} loading=\"lazy\"/>\n              <figcaption>\n                <strong>{children}</strong>\n              </figcaption>\n            </figure>\n          </div>\n        );\n      }\n      default:\n        return next();\n    }\n  };\n\n  const renderMark = (props, editor, next) => {\n    const { children, mark, attributes } = props;\n\n    switch (mark.type) {\n      case \"bold\":\n        return <strong {...attributes}>{children}</strong>;\n      case \"code\":\n        return <code {...attributes}>{children}</code>;\n      case \"italic\":\n        return <em {...attributes}>{children}</em>;\n      case \"underlined\":\n        return <u {...attributes}>{children}</u>;\n      default:\n        return next();\n    }\n  };\n\n  const onKeyDown = (event, editor, next) => {\n    let mark;\n\n    if (isBoldHotkey(event)) {\n      mark = \"bold\";\n    } else if (isItalicHotkey(event)) {\n      mark = \"italic\";\n    } else if (isUnderlinedHotkey(event)) {\n      mark = \"underlined\";\n    } else if (isCodeHotkey(event)) {\n      mark = \"code\";\n    } else if (isTabHotkey(event)) {\n      event.preventDefault();\n      return next();\n    } else {\n      return next();\n    }\n\n    event.preventDefault();\n    editor.toggleMark(mark);\n  };\n\n  const onClickMark = (event, type) => {\n    event.preventDefault();\n    ref.current.toggleMark(type);\n  };\n\n  const onClickImage = (event) => {\n    event.preventDefault();\n    const src = window.prompt(\"enter the URL of the image:\");\n    // const caption = window.prompt(\"enter a caption for the image\")\n    if (!src) return;\n    ref.current.command(insertImage, src);\n  };\n\n  const onClickFigure = (event) => {\n    event.preventDefault();\n    const src = window.prompt(\"enter the URL of the image:\");\n    if (!src) return;\n    ref.current.command(insertFigure, src);\n  };\n\n  const onClickBlock = (event, type) => {\n    event.preventDefault();\n\n    const editor = ref.current;\n    const value = editor.value;\n    const document = value.document;\n\n    // Handle everything but list buttons.\n    if (type !== \"bulleted-list\" && type !== \"numbered-list\") {\n      const isActive = hasBlock(type);\n      const isList = hasBlock(\"list-item\");\n\n      if (isList) {\n        editor\n          .setBlocks(isActive ? DEFAULT_NODE : type)\n          .unwrapBlock(\"bulleted-list\")\n          .unwrapBlock(\"numbered-list\");\n      } else {\n        editor.setBlocks(isActive ? DEFAULT_NODE : type);\n      }\n    } else {\n      // Handle the extra wrapping required for list buttons.\n      const isList = hasBlock(\"list-item\");\n      const isType = value.blocks.some((block) => {\n        return !!document.getClosest(\n          block.key,\n          (parent) => parent.type === type\n        );\n      });\n\n      if (isList && isType) {\n        editor\n          .setBlocks(DEFAULT_NODE)\n          .unwrapBlock(\"bulleted-list\")\n          .unwrapBlock(\"numbered-list\");\n      } else if (isList) {\n        editor\n          .unwrapBlock(\n            type === \"bulleted-list\" ? \"numbered-list\" : \"bulleted-list\"\n          )\n          .wrapBlock(type);\n      } else {\n        editor.setBlocks(\"list-item\").wrapBlock(type);\n      }\n    }\n  };\n\n  const onDropOrPaste = (event, editor, next) => {\n    const target = editor.findEventRange(event);\n    if (!target && event.type === \"drop\") return next();\n\n    const transfer = getEventTransfer(event);\n    const { type, text, files } = transfer;\n\n    if (type === \"files\") {\n      for (const file of files) {\n        const reader = new FileReader();\n        const [mime] = file.type.split(\"/\");\n        if (mime !== \"image\") continue;\n\n        reader.addEventListener(\"load\", () => {\n          editor.command(insertImage, reader.result, target);\n        });\n\n        reader.readAsDataURL(file);\n      }\n      return;\n    }\n\n    if (type === \"text\") {\n      if (!isUrl(text)) return next();\n      if (!isImage(text)) return next();\n      editor.command(insertImage, text, target);\n      return;\n    }\n\n    next();\n  };\n\n  const renderOnceToolbar = (\n    <FormatToolbar>\n      {renderMarkButton(\n        \"bold\",\n        `${styles[\"fas\"]} ${styles[\"fa-bold\"]} fas fa-bold`\n      )}\n      {renderMarkButton(\n        \"italic\",\n        `${styles[\"fas\"]} ${styles[\"fa-italic\"]} fas fa-italic`\n      )}\n      {renderMarkButton(\n        \"underlined\",\n        `${styles[\"fas\"]} ${styles[\"fa-underline\"]} fas fa-underline`\n      )}\n      {renderMarkButton(\n        \"code\",\n        `${styles[\"fas\"]} ${styles[\"fa-code\"]} fas fa-code`\n      )}\n      {renderBlockButton(\n        \"heading-one\",\n        `${styles[\"fas\"]} ${styles[\"fa-h1\"]} fas fa-heading`\n      )}\n      {renderBlockButton(\n        \"heading-two\",\n        `${styles[\"fas\"]} ${styles[\"fa-h2\"]} fas fa-heading`\n      )}\n      {renderBlockButton(\n        \"block-quote\",\n        `${styles[\"fas\"]} ${styles[\"fa-quote-right\"]} fas fa-quote-right`\n      )}\n      {renderBlockButton(\n        \"numbered-list\",\n        `${styles[\"fas\"]} ${styles[\"fa-list-ol\"]} fas fa-list-ol`\n      )}\n      {renderBlockButton(\n        \"bulleted-list\",\n        `${styles[\"fas\"]} ${styles[\"fa-list-ul\"]} fas fa-list-ul`\n      )}\n      {renderImageButton(`${styles[\"fas\"]} ${styles[\"fa-image\"]} fas fa-image`)}\n      {renderFigureButton(\n        `${styles[\"fas\"]} ${styles[\"fa-images\"]} fas fa-images`\n      )}\n\n      {renderSaveButton(`${styles[\"fas\"]} ${styles[\"fa-save\"]} fas fa-save`)}\n    </FormatToolbar>\n  );\n\n  return (\n    <div className={styles[\"overarching\"]}>\n            {props.toolbarFixed ? (\n            <div\n              style={{ position: \"fixed\", top: \"66px\", backgroundColor: \"#fff\" }}\n            >\n              {/* <div style={{ position: \"fixed\", top: \"103.5px\", right: \"0px\"}}> */}\n              {renderOnceToolbar}\n            </div>\n          ) : (\n            <div>\n              {renderOnceToolbar}\n            </div>\n          )}\n      <Editor\n        ref={ref}\n        className={styles[\"Editor\"]}\n        value={value}\n        onChange={(opts) => setValue(opts.value)}\n        onKeyDown={onKeyDown}\n        renderMark={renderMark}\n        renderBlock={renderBlock}\n        onDrop={onDropOrPaste}\n        schema={schema}\n      />\n    </div>\n  );\n};\n\n\nexport const getRules = (cssStyles) => {\n  const BLOCK_TAGS = {\n    p: \"paragraph\",\n    blockquote: \"block-quote\",\n    ul: `bulleted-list`,\n    h1: `heading-one`,\n    h2: `heading-two`,\n    li: `list-item`,\n    ol: `numbered-list`,\n    img: `image`,\n  };\n  \n  // Add a dictionary of mark tags.\n  const MARK_TAGS = {\n    em: \"italic\",\n    strong: \"bold\",\n    u: \"underlined\",\n    code: `code`,\n  };\n  \n\n  const rules = [\n    {\n      deserialize(el, next) {\n        const type = BLOCK_TAGS[el.tagName.toLowerCase()];\n        if (type) {\n          return {\n            object: \"block\",\n            type: type,\n            data: {\n              className: el.getAttribute(\"class\"),\n            },\n            nodes: next(el.childNodes),\n          };\n        }\n      },\n      serialize(obj, children) {\n        if (obj.object == \"block\") {\n          switch (obj.type) {\n            case \"paragraph\":\n              return (\n                <di\n                  className={cssStyles[\"main-pane\"]}\n                  v\n                  className={cssStyles[\"main-pane-item\"]}\n                >\n                  <p>{children}</p>\n                </di>\n              );\n            case \"block-quote\":\n              return (\n                <div className={`${cssStyles[\"main-pane-item\"]}`}>\n                  <blockquote>{children}</blockquote>\n                </div>\n              );\n            case \"bulleted-list\":\n              return (\n                <div className={cssStyles[\"main-pane-item\"]}>\n                  <ul>{children}</ul>\n                </div>\n              );\n            case \"heading-one\":\n              return (\n                <div className={cssStyles[\"main-pane-item\"]}>\n                  <h1 className={cssStyles[\"heading\"]}>{children}</h1>\n                </div>\n              );\n            case \"heading-two\":\n              return (\n                <div className={cssStyles[\"main-pane-item\"]}>\n                  <h2>{children}</h2>\n                </div>\n              );\n            case \"list-item\":\n              return <li>{children}</li>;\n            case \"numbered-list\":\n              return (\n                <div className={cssStyles[\"main-pane-item\"]}>\n                  <ol>{children}</ol>\n                </div>\n              );\n            case \"image\": {\n              const src = obj.data[\"src\"];\n              return (\n                <div className={`${cssStyles[\"main-pane-item\"]}`}>\n                  <figure className={cssStyles[\"image-container\"]}>\n                    <img src={src} loading=\"lazy\"/>\n                  </figure>\n                </div>\n              );\n            }\n            case \"figure\": {\n              const src = obj.data[\"src\"];\n              return (\n                <div className={`${cssStyles[\"main-pane-item\"]}`}>\n                  <figure className={cssStyles[\"image-container\"]}>\n                    <img src={src} loading=\"lazy\"/>\n                    <figcaption>\n                      <strong>{children}</strong>\n                    </figcaption>\n                  </figure>\n                </div>\n              );\n            }\n          }\n        }\n      },\n    },\n    // Add a new rule that handles marks...\n    {\n      deserialize(el, next) {\n        const type = MARK_TAGS[el.tagName.toLowerCase()];\n        if (type) {\n          return {\n            object: \"mark\",\n            type: type,\n            nodes: next(el.childNodes),\n          };\n        }\n      },\n      serialize(obj, children) {\n        if (obj.object == \"mark\") {\n          switch (obj.type) {\n            case \"bold\":\n              return <strong>{children}</strong>;\n            case \"italic\":\n              return <em>{children}</em>;\n            case \"code\":\n              return <code>{children}</code>;\n            case \"underlined\":\n              return <u>{children}</u>;\n          }\n        }\n      },\n    },\n  ];\n  return rules;\n}\n\n\n \n\n\nexport default TextEditor;\n\n\n\n"]},"metadata":{},"sourceType":"module"}