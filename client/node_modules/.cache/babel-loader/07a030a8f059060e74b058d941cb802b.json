{"ast":null,"code":"var _jsxFileName = \"/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/AudioPlayer.js\";\nimport React, { useState, useRef, useEffect, forwardRef } from \"react\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAudioPlayerPlayer, setAudioPlayerCurrentTime } from '../../redux/actions';\nimport styles from \"./AudioPlayer.module.css\";\nconst AudioPlayer = forwardRef((props, ref) => {\n  // const [selectedTrack, setSelectedTrack] = useState({\n  //   title: \"False Nine Podcast #17 Champions League RO16 first leg review\",\n  //   by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n  //   link:\n  //     \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n  //   duration: 0,\n  //   date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n  //   currentTime: 0\n  // });\n  // const [player, setPlayer] = useState(\"paused\");\n  const prevTrack = usePrevious(props.selectedTrack.items[props.selectedTrack.currentlyPlaying]) || {\n    title: \"False Nine Podcast #17 Champions League RO16 first Leg review\",\n    by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n    link: \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n    date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n    image: \"https://d3t3ozftmdmh3i.cloudfront.net/production/podcast_uploaded_nologo/8497059/8497059-1599895849523-cbb8b2f53d641.jpg\"\n  };\n  const player = useSelector(state => state.audioPlayer.player);\n  const dispatch = useDispatch();\n  const prevPlayer = usePrevious(player);\n  const [duration, setDuration] = useState(2172.892);\n  const seekBarRef = useRef();\n  useEffect(() => {\n    if (player !== prevPlayer) {\n      if (player === \"paused\") {\n        props.audioRef.current.pause();\n      } else if (player === \"playing\" && prevPlayer === \"paused\") {\n        props.audioRef.current.play();\n      }\n    }\n  }, [player]);\n  useEffect(() => {\n    if (props.selectedTrack.items[props.selectedTrack.currentlyPlaying].title !== prevTrack.title) {\n      let track = props.selectedTrack ? props.selectedTrack.items[props.selectedTrack.currentlyPlaying].link : null;\n\n      if (track) {\n        if (props.audioRef.current.src !== track) {\n          props.audioRef.current.src = track;\n          props.audioRef.current.play();\n          dispatch(setAudioPlayerPlayer(\"playing\"));\n        }\n      }\n    }\n  }, [props.selectedTrack.items[props.selectedTrack.currentlyPlaying]]);\n  useEffect(() => {\n    props.audioRef.current.addEventListener(\"timeupdate\", e => {\n      dispatch(setAudioPlayerCurrentTime(e.target.currentTime));\n    });\n    return () => {\n      props.audioRef.current.removeEventListener(\"timeupdate\", () => {});\n    };\n  }, []);\n\n  const handleSliderChange = e => {\n    const time = duration * (e.target.value / 100);\n    props.audioRef.current.currentTime = time;\n    dispatch(setAudioPlayerCurrentTime(time));\n  };\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n  function getTime(time) {\n    if (!isNaN(time)) {\n      return Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2);\n    }\n  }\n\n  const progressDuration = getTime(duration);\n  const progressTime = getTime(props.currentTime);\n  const progress = 100 / duration * props.currentTime;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: styles[\"audio-player\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: props.isActive ? styles[\"image-container\"] : `${styles[\"image-container\"]} ${styles[\"image-container-inactive\"]}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles[\"image\"],\n    src: props.selectedTrack.items[props.selectedTrack.currentlyPlaying].image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"player\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"minimized\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, !props.isActive && /*#__PURE__*/React.createElement(\"div\", {\n    id: styles[\"bars\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"title-container\"],\n    onClick: () => props.setActive(!props.isActive),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, props.selectedTrack.items[props.selectedTrack.currentlyPlaying].title.toUpperCase()), props.isActive ? /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.setActive(false),\n    className: `${styles[\"audio-player-inactive\"]} ${styles[\"fas\"]} ${styles[\"fa-chevron-down\"]} fas fa-chevron-down`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.setActive(true),\n    className: `${styles[\"audio-player-active\"]} ${styles[\"fas\"]} ${styles[\"fa-chevron-up\"]} fas fa-chevron-up`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: props.isActive ? styles[\"image-controls\"] : `${styles[\"image-controls\"]} ${styles[\"image-controls-inactive\"]}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"controls\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.rewindPodcasts(),\n    className: `${styles[\"backward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-backward\"]} fas fa-step-backward`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), player === \"paused\" && /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => {\n      props.audioRef.current.play();\n      dispatch(setAudioPlayerPlayer(\"playing\"));\n    },\n    className: `${styles[\"play-button\"]} ${styles[\"far\"]} ${styles[\"fa-play-circle\"]} far fa-play-circle`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }), player === \"playing\" && /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => dispatch(setAudioPlayerPlayer(\"paused\")),\n    className: `${styles[\"pause-button\"]} ${styles[\"far\"]} ${styles[\"fa-pause-circle\"]} far fa-pause-circle`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => props.forwardPodcasts(),\n    className: `${styles[\"forward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-forward\"]} fas fa-step-forward`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles[\"progress-bar\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, progressTime, \" \", /*#__PURE__*/React.createElement(\"input\", {\n    ref: seekBarRef,\n    type: \"range\",\n    className: styles[\"progress-bar-slider\"],\n    onChange: handleSliderChange,\n    value: progress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }), \" \", progressDuration))));\n});\nexport default AudioPlayer;","map":{"version":3,"sources":["/home/sajalrs/ReactProgramming/article_podcast_website/client/src/components/AudioPlayer/AudioPlayer.js"],"names":["React","useState","useRef","useEffect","forwardRef","useSelector","useDispatch","setAudioPlayerPlayer","setAudioPlayerCurrentTime","styles","AudioPlayer","props","ref","prevTrack","usePrevious","selectedTrack","items","currentlyPlaying","title","by","link","date","image","player","state","audioPlayer","dispatch","prevPlayer","duration","setDuration","seekBarRef","audioRef","current","pause","play","track","src","addEventListener","e","target","currentTime","removeEventListener","handleSliderChange","time","value","getTime","isNaN","Math","floor","slice","progressDuration","progressTime","progress","isActive","setActive","toUpperCase","rewindPodcasts","forwardPodcasts"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, forwardRef } from \"react\";\nimport {useSelector, useDispatch} from 'react-redux'\nimport {setAudioPlayerPlayer, setAudioPlayerCurrentTime} from '../../redux/actions'\nimport styles from \"./AudioPlayer.module.css\";\nconst AudioPlayer = forwardRef((props, ref) => {\n  // const [selectedTrack, setSelectedTrack] = useState({\n  //   title: \"False Nine Podcast #17 Champions League RO16 first leg review\",\n  //   by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n  //   link:\n  //     \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n  //   duration: 0,\n  //   date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n  //   currentTime: 0\n  // });\n  // const [player, setPlayer] = useState(\"paused\");\n  \n  const prevTrack = usePrevious(\n    props.selectedTrack.items[props.selectedTrack.currentlyPlaying]\n  ) || {\n    title: \"False Nine Podcast #17 Champions League RO16 first Leg review\",\n    by: \"Ishan Sharma, Susajjan Dhungana and Ojash Dangal\",\n    link:\n      \"https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a\",\n    date: \"Sat, 12 Sep 2020 08:42:34 GMT\",\n    image:\n      \"https://d3t3ozftmdmh3i.cloudfront.net/production/podcast_uploaded_nologo/8497059/8497059-1599895849523-cbb8b2f53d641.jpg\",\n  };\n  const player = useSelector(state => state.audioPlayer.player);\n  const dispatch = useDispatch();\n  const prevPlayer = usePrevious(player);\n  const [duration, setDuration] = useState(2172.892);\n  \n  const seekBarRef = useRef();\n  useEffect(() => {\n    if (player !== prevPlayer) {\n      if (player === \"paused\") {\n        props.audioRef.current.pause();\n      } else if (player === \"playing\" && prevPlayer === \"paused\") {\n        props.audioRef.current.play();\n      }\n    }\n  }, [player]);\n\n  useEffect(() => {\n    if (\n      props.selectedTrack.items[props.selectedTrack.currentlyPlaying].title !==\n      prevTrack.title\n    ) {\n      let track = props.selectedTrack\n        ? props.selectedTrack.items[props.selectedTrack.currentlyPlaying].link\n        : null;\n      if (track) {\n        if (props.audioRef.current.src !== track) {\n          props.audioRef.current.src = track;\n          props.audioRef.current.play();\n          dispatch(setAudioPlayerPlayer(\"playing\"));\n        }\n      }\n    }\n  }, [props.selectedTrack.items[props.selectedTrack.currentlyPlaying]]);\n\n  useEffect(() => {\n    props.audioRef.current.addEventListener(\"timeupdate\", (e) => {\n      dispatch(setAudioPlayerCurrentTime(e.target.currentTime));\n    });\n    return () => {\n      props.audioRef.current.removeEventListener(\"timeupdate\", () => {});\n    };\n  }, []);\n\n  const handleSliderChange = (e) => {\n    const time = duration * (e.target.value / 100);\n    props.audioRef.current.currentTime = time;\n    dispatch(setAudioPlayerCurrentTime(time));\n  };\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n  function getTime(time) {\n    if (!isNaN(time)) {\n      return (\n        Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2)\n      );\n    }\n  }\n  const progressDuration = getTime(duration);\n  const progressTime = getTime(props.currentTime);\n  const progress = (100 / duration) * props.currentTime;\n  return (\n    <div ref={ref} className={styles[\"audio-player\"]}>\n      <div\n        className={\n          props.isActive\n            ? styles[\"image-container\"]\n            : `${styles[\"image-container\"]} ${styles[\"image-container-inactive\"]}`\n        }\n      >\n        <img\n          className={styles[\"image\"]}\n          src={\n            props.selectedTrack.items[props.selectedTrack.currentlyPlaying]\n              .image\n          }\n        />\n      </div>\n      <div className={styles[\"player\"]}>\n        <div className={styles[\"minimized\"]}>\n          {!props.isActive && <div id={styles[\"bars\"]}>\n          <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n            <div className={player === \"playing\" ? styles[\"bar\"] : styles[\"bar-paused\"]}></div>\n          </div>}\n\n          <div\n            className={styles[\"title-container\"]}\n            onClick={() => props.setActive(!props.isActive)}\n          >\n            {props.selectedTrack.items[\n              props.selectedTrack.currentlyPlaying\n            ].title.toUpperCase()}\n          </div>\n\n          {props.isActive ? (\n            <i\n              onClick={() => props.setActive(false)}\n              className={`${styles[\"audio-player-inactive\"]} ${styles[\"fas\"]} ${styles[\"fa-chevron-down\"]} fas fa-chevron-down`}\n            ></i>\n          ) : (\n            <i\n              onClick={() => props.setActive(true)}\n              className={`${styles[\"audio-player-active\"]} ${styles[\"fas\"]} ${styles[\"fa-chevron-up\"]} fas fa-chevron-up`}\n            ></i>\n          )}\n        </div>\n\n        <div\n          className={\n            props.isActive\n              ? styles[\"image-controls\"]\n              : `${styles[\"image-controls\"]} ${styles[\"image-controls-inactive\"]}`\n          }\n        >\n          <div className={styles[\"controls\"]}>\n            <i\n              onClick={() => props.rewindPodcasts()}\n              className={`${styles[\"backward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-backward\"]} fas fa-step-backward`}\n            ></i>\n            {player === \"paused\" && (\n              <i\n                onClick={() => {props.audioRef.current.play();dispatch(setAudioPlayerPlayer(\"playing\"))}}\n                className={`${styles[\"play-button\"]} ${styles[\"far\"]} ${styles[\"fa-play-circle\"]} far fa-play-circle`}\n              ></i>\n            )}\n            {player === \"playing\" && (\n              <i\n                onClick={() => dispatch(setAudioPlayerPlayer(\"paused\"))}\n                className={`${styles[\"pause-button\"]} ${styles[\"far\"]} ${styles[\"fa-pause-circle\"]} far fa-pause-circle`}\n              ></i>\n            )}\n            <i\n              onClick={() => props.forwardPodcasts()}\n              className={`${styles[\"forward-button\"]} ${styles[\"fas\"]} ${styles[\"fa-step-forward\"]} fas fa-step-forward`}\n            ></i>\n          </div>\n          <div className={styles[\"progress-bar\"]}>\n            {progressTime}{\" \"}\n            <input\n              ref={seekBarRef}\n              type=\"range\"\n              className={styles[\"progress-bar-slider\"]}\n              onChange={handleSliderChange}\n              value={progress}\n            />{\" \"}\n            {progressDuration}\n          </div>\n        </div>\n      </div>\n\n      {/*https://anchor.fm/s/333e122c/podcast/play/19475297/sponsor/a3205tm/https%3A%2F%2Fd3ctxlq1ktw2nl.cloudfront.net%2Fstaging%2F2020-09-12%2F9ca05751732f6a1351863756bdfb662b.m4a  */}\n    </div>\n  );\n});\n\nexport default AudioPlayer;\n"]},"metadata":{},"sourceType":"module"}